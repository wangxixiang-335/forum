import{d as V,r as h,i as y,l as w,c as l,a as s,n as d,t,u as I,b as S,F as z,g as j,y as k,z as A,x as M,h as c,_ as U}from"./index-DvT1nwGZ.js";const B={class:"connection-test"},R={class:"container"},X={class:"config-info"},x={class:"config-item"},D={class:"config-item"},L={class:"test-section"},O=["disabled"],F={key:0,class:"details"},T={class:"database-status"},Z={key:0,class:"tables"},K={class:"table-icon"},Y={class:"table-name"},q={class:"table-status"},G={key:1},$=V({__name:"ConnectionTestView",setup(P){const C=M(),i=h(!1),a=h(null),u=h([]),r="https://bkintupjzbcjiqvzricz.supabase.co",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJraW50dXBqemJjamlxdnpyaWN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2MDYzNDEsImV4cCI6MjA3NzE4MjM0MX0.ZA6l95LSZ_x2DFfJGCcXMXLlRg9nOV7kNqEJUC7OG8o",p=y(()=>!r.includes("default.supabase.co")),g=y(()=>!f.includes("default")),E=async()=>{i.value=!0,a.value=null,u.value=[];try{console.log("ğŸ”— å¼€å§‹æµ‹è¯•Supabaseè¿æ¥...");const{data:n,error:e}=await k.auth.getSession();if(e)throw e;const o=["profiles","posts","comments","interactions"],b=[];for(const m of o)try{const{data:v,error:_}=await k.from(m).select("count").limit(1);b.push({name:m,accessible:!_,error:_?_.message:null})}catch(v){b.push({name:m,accessible:!1,error:v instanceof Error?v.message:"æœªçŸ¥é”™è¯¯"})}u.value=b,a.value={success:!0,message:"Supabaseè¿æ¥æˆåŠŸï¼æ‰€æœ‰é…ç½®æ­£ç¡®ã€‚",details:`è®¤è¯çŠ¶æ€: ${n.session?"å·²ç™»å½•":"æœªç™»å½•"}
è¡¨è®¿é—®æµ‹è¯•å®Œæˆ`},console.log("âœ… Supabaseè¿æ¥æµ‹è¯•æˆåŠŸ")}catch(n){const e=A(n);a.value={success:!1,message:e.message,details:`é”™è¯¯ä»£ç : ${e.code}
å»ºè®®æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®`},console.error("âŒ Supabaseè¿æ¥æµ‹è¯•å¤±è´¥:",n)}finally{i.value=!1}},J=()=>{C.push("/")},N=()=>{if(p.value){const n=r.split(".")[0].replace("https://","");window.open(`https://supabase.com/dashboard/project/${n}`,"_blank")}else window.open("https://supabase.com/dashboard","_blank")};return w(()=>{console.log("ğŸ”— è¿æ¥æµ‹è¯•é¡µé¢å·²åŠ è½½"),console.log("ç¯å¢ƒå˜é‡æ£€æŸ¥:"),console.log("VITE_SUPABASE_URL:",r),console.log("VITE_SUPABASE_ANON_KEY:","å·²é…ç½®")}),(n,e)=>(c(),l("div",B,[s("div",R,[e[4]||(e[4]=s("h1",null,"ğŸ”— Supabaseè¿æ¥æµ‹è¯•",-1)),s("div",X,[e[2]||(e[2]=s("h2",null,"å½“å‰é…ç½®",-1)),s("div",x,[e[0]||(e[0]=s("strong",null,"Supabase URL:",-1)),s("span",{class:d({valid:p.value,invalid:!p.value})},t(I(r)||"æœªé…ç½®"),3)]),s("div",D,[e[1]||(e[1]=s("strong",null,"Anon Key:",-1)),s("span",{class:d({valid:g.value,invalid:!g.value})},t(I(f)?"å·²é…ç½®":"æœªé…ç½®"),3)])]),s("div",L,[s("button",{onClick:E,disabled:i.value,class:"test-btn"},t(i.value?"æµ‹è¯•ä¸­...":"æµ‹è¯•è¿æ¥"),9,O),a.value?(c(),l("div",{key:0,class:d(["result",a.value.success?"success":"error"])},[s("h3",null,t(a.value.success?"âœ… è¿æ¥æˆåŠŸ":"âŒ è¿æ¥å¤±è´¥"),1),s("p",null,t(a.value.message),1),a.value.details?(c(),l("div",F,[s("pre",null,t(a.value.details),1)])):S("",!0)],2)):S("",!0)]),s("div",T,[e[3]||(e[3]=s("h2",null,"æ•°æ®åº“è¡¨çŠ¶æ€",-1)),u.value?(c(),l("div",Z,[(c(!0),l(z,null,j(u.value,o=>(c(),l("div",{key:o.name,class:d(["table-item",{accessible:o.accessible,inaccessible:!o.accessible}])},[s("span",K,t(o.accessible?"âœ…":"âŒ"),1),s("span",Y,t(o.name),1),s("span",q,t(o.accessible?"å¯è®¿é—®":"ä¸å¯è®¿é—®"),1)],2))),128))])):(c(),l("p",G,"ç‚¹å‡»æµ‹è¯•è¿æ¥æŸ¥çœ‹è¡¨çŠ¶æ€"))]),s("div",{class:"actions"},[s("button",{onClick:J,class:"action-btn primary"},"å‰å¾€é¦–é¡µ"),s("button",{onClick:N,class:"action-btn secondary"},"æ‰“å¼€Supabaseæ§åˆ¶å°")])])]))}}),H=U($,[["__scopeId","data-v-7ce5ad4c"]]);export{H as default};
//# sourceMappingURL=ConnectionTestView-BZ7jbtyT.js.map
