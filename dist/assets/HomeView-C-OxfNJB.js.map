{"version":3,"file":"HomeView-C-OxfNJB.js","sources":["../../src/components/CreatePostModal.vue","../../src/components/PostFilters.vue","../../src/views/HomeView.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal-overlay\" @click=\"$emit('close')\">\r\n    <div class=\"modal-content\" @click.stop>\r\n      <div class=\"modal-header\">\r\n        <h3>发布新帖子</h3>\r\n        <button class=\"close-btn\" @click=\"$emit('close')\">×</button>\r\n      </div>\r\n      \r\n      <form @submit.prevent=\"handleSubmit\" class=\"post-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"title\">标题</label>\r\n          <input\r\n            id=\"title\"\r\n            v-model=\"form.title\"\r\n            type=\"text\"\r\n            placeholder=\"请输入帖子标题\"\r\n            required\r\n            maxlength=\"100\"\r\n          />\r\n          <span class=\"char-count\">{{ form.title.length }}/100</span>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"content\">内容</label>\r\n          <textarea\r\n            id=\"content\"\r\n            v-model=\"form.content\"\r\n            placeholder=\"请输入帖子内容（支持Markdown语法）\"\r\n            required\r\n            rows=\"8\"\r\n            maxlength=\"5000\"\r\n          ></textarea>\r\n          <span class=\"char-count\">{{ form.content.length }}/5000</span>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"tags\">标签（可选，用逗号分隔）</label>\r\n          <input\r\n            id=\"tags\"\r\n            v-model=\"form.tagsInput\"\r\n            type=\"text\"\r\n            placeholder=\"例如：技术,前端,Vue\"\r\n          />\r\n          <div v-if=\"form.tags.length > 0\" class=\"tags-preview\">\r\n            <span v-for=\"tag in form.tags\" :key=\"tag\" class=\"tag-preview\">\r\n              {{ tag }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"form-actions\">\r\n          <button type=\"button\" @click=\"$emit('close')\" class=\"btn-secondary\">\r\n            取消\r\n          </button>\r\n          <button type=\"submit\" :disabled=\"!isFormValid || loading\" class=\"btn-primary\">\r\n            {{ loading ? '发布中...' : '发布' }}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch } from 'vue'\r\nimport { usePostStore } from '@/stores/posts'\r\n\r\ninterface Emits {\r\n  (e: 'close'): void\r\n  (e: 'created'): void\r\n}\r\n\r\nconst emit = defineEmits<Emits>()\r\n\r\nconst postStore = usePostStore()\r\n\r\nconst form = ref({\r\n  title: '',\r\n  content: '',\r\n  tagsInput: '',\r\n  tags: [] as string[]\r\n})\r\n\r\nconst loading = ref(false)\r\n\r\n// 监听标签输入变化\r\nwatch(() => form.value.tagsInput, (newValue) => {\r\n  if (newValue.trim()) {\r\n    form.value.tags = newValue\r\n      .split(',')\r\n      .map(tag => tag.trim())\r\n      .filter(tag => tag.length > 0)\r\n      .slice(0, 5) // 最多5个标签\r\n  } else {\r\n    form.value.tags = []\r\n  }\r\n})\r\n\r\n// 表单验证\r\nconst isFormValid = computed(() => {\r\n  return form.value.title.trim().length > 0 && \r\n         form.value.content.trim().length > 0 &&\r\n         form.value.title.length <= 100 &&\r\n         form.value.content.length <= 5000\r\n})\r\n\r\nconst handleSubmit = async () => {\r\n  if (!isFormValid.value) return\r\n  \r\n  loading.value = true\r\n  \r\n  try {\r\n    const result = await postStore.createPost(\r\n      form.value.title.trim(),\r\n      form.value.content.trim(),\r\n      form.value.tags\r\n    )\r\n    \r\n    if (result.success) {\r\n      emit('created')\r\n      // 重置表单\r\n      form.value = {\r\n        title: '',\r\n        content: '',\r\n        tagsInput: '',\r\n        tags: []\r\n      }\r\n    } else {\r\n      alert(result.error?.message || '发布失败')\r\n    }\r\n  } catch (error: any) {\r\n    console.error('发布帖子失败:', error)\r\n    alert('发布失败，请重试')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  border-radius: 8px;\r\n  width: 90%;\r\n  max-width: 600px;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.modal-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  color: #666;\r\n  padding: 0;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.close-btn:hover {\r\n  color: #333;\r\n}\r\n\r\n.post-form {\r\n  padding: 1.5rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n  position: relative;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.form-group input,\r\n.form-group textarea {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.form-group input:focus,\r\n.form-group textarea:focus {\r\n  outline: none;\r\n  border-color: #1890ff;\r\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n}\r\n\r\n.char-count {\r\n  position: absolute;\r\n  right: 0.75rem;\r\n  bottom: 0.75rem;\r\n  font-size: 0.875rem;\r\n  color: #999;\r\n}\r\n\r\n.tags-preview {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-top: 0.5rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.tag-preview {\r\n  background: #e6f7ff;\r\n  color: #1890ff;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #f5f5f5;\r\n  color: #666;\r\n  border: 1px solid #d9d9d9;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #e8e8e8;\r\n}\r\n\r\n.btn-primary {\r\n  background: #1890ff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #40a9ff;\r\n}\r\n\r\n.btn-primary:disabled {\r\n  background: #bae7ff;\r\n  cursor: not-allowed;\r\n}\r\n</style>","<template>\n  <div class=\"post-filters\">\n    <div class=\"filters-header\">\n      <h5 class=\"filters-title\">筛选和排序</h5>\n      <button \n        v-if=\"hasActiveFilters\" \n        class=\"btn btn-sm btn-outline-secondary\"\n        @click=\"resetAllFilters\"\n      >\n        <i class=\"bi bi-arrow-clockwise\"></i>\n        重置\n      </button>\n    </div>\n\n    <div class=\"filters-content\">\n      <!-- 排序方式 -->\n      <div class=\"filter-group\">\n        <label class=\"filter-label\">排序方式:</label>\n        <div class=\"sort-options\">\n          <button\n            v-for=\"option in sortOptions\"\n            :key=\"option.value\"\n            class=\"sort-btn\"\n            :class=\"{ active: filters.sortBy === option.value }\"\n            @click=\"updateFilter('sortBy', option.value)\"\n          >\n            <i :class=\"option.icon\"></i>\n            {{ option.label }}\n          </button>\n        </div>\n      </div>\n\n      <!-- 时间范围 -->\n      <div class=\"filter-group\">\n        <label class=\"filter-label\">时间范围:</label>\n        <div class=\"time-options\">\n          <button\n            v-for=\"option in timeOptions\"\n            :key=\"option.value\"\n            class=\"time-btn\"\n            :class=\"{ active: filters.timeRange === option.value }\"\n            @click=\"updateFilter('timeRange', option.value)\"\n          >\n            {{ option.label }}\n          </button>\n        </div>\n      </div>\n\n      <!-- 标签筛选 -->\n      <div class=\"filter-group\">\n        <label class=\"filter-label\">标签筛选:</label>\n        <div class=\"tags-section\">\n          <div class=\"selected-tags\" v-if=\"filters.tags && filters.tags.length > 0\">\n            <span\n              v-for=\"tag in filters.tags\"\n              :key=\"tag\"\n              class=\"selected-tag\"\n            >\n              #{{ tag }}\n              <button class=\"remove-tag\" @click=\"removeTag(tag)\">\n                <i class=\"bi bi-x\"></i>\n              </button>\n            </span>\n          </div>\n          \n          <div class=\"popular-tags\">\n            <div class=\"tags-input-group\">\n              <input\n                v-model=\"tagInput\"\n                type=\"text\"\n                class=\"form-control tag-input\"\n                placeholder=\"输入标签名称...\"\n                @keyup.enter=\"addTag\"\n              />\n              <button class=\"btn btn-primary\" @click=\"addTag\" :disabled=\"!tagInput.trim()\">\n                添加\n              </button>\n            </div>\n            \n            <div v-if=\"popularTags.length > 0\" class=\"tags-list\">\n              <span\n                v-for=\"tagInfo in popularTags\"\n                :key=\"tagInfo.tag\"\n                class=\"popular-tag\"\n                :class=\"{ selected: filters.tags?.includes(tagInfo.tag) }\"\n                @click=\"toggleTag(tagInfo.tag)\"\n              >\n                #{{ tagInfo.tag }}\n                <span class=\"tag-count\">({{ tagInfo.count }})</span>\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 作者筛选 -->\n      <div v-if=\"showAuthorFilter\" class=\"filter-group\">\n        <label class=\"filter-label\">作者筛选:</label>\n        <div class=\"author-section\">\n          <div v-if=\"selectedAuthor\" class=\"selected-author\">\n            <UserAvatar :user=\"selectedAuthor\" size=\"sm\" />\n            <span>{{ selectedAuthor.username }}</span>\n            <button class=\"remove-author\" @click=\"clearAuthor\">\n              <i class=\"bi bi-x\"></i>\n            </button>\n          </div>\n          <button v-else class=\"btn btn-outline-primary\" @click=\"$emit('select-author')\">\n            <i class=\"bi bi-person-plus\"></i>\n            选择作者\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 活跃筛选统计 -->\n    <div v-if=\"hasActiveFilters\" class=\"active-filters-summary\">\n      <span class=\"summary-text\">\n        当前有 {{ activeFilterCount }} 个筛选条件\n      </span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { usePostStore } from '@/stores/posts'\nimport UserAvatar from './UserAvatar.vue'\nimport type { PostFilters } from '@/stores/posts'\n\ninterface Props {\n  showAuthorFilter?: boolean\n  selectedAuthor?: any\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  showAuthorFilter: false\n})\n\nconst emit = defineEmits<{\n  'select-author': []\n  'filters-changed': [filters: PostFilters]\n}>()\n\nconst postStore = usePostStore()\nconst { filters, getPopularTags } = postStore\n\n// 响应式数据\nconst tagInput = ref('')\nconst popularTags = ref<any[]>([])\n\n// 排序选项\nconst sortOptions = [\n  { value: 'newest', label: '最新发布', icon: 'bi bi-clock' },\n  { value: 'oldest', label: '最早发布', icon: 'bi bi-clock-history' },\n  { value: 'most_liked', label: '最多点赞', icon: 'bi bi-heart-fill' },\n  { value: 'most_commented', label: '最多评论', icon: 'bi bi-chat-fill' },\n  { value: 'most_viewed', label: '最多浏览', icon: 'bi bi-eye-fill' }\n]\n\n// 时间选项\nconst timeOptions = [\n  { value: 'all', label: '全部时间' },\n  { value: 'today', label: '今天' },\n  { value: 'week', label: '本周' },\n  { value: 'month', label: '本月' },\n  { value: 'year', label: '今年' }\n]\n\n// 计算属性\nconst hasActiveFilters = computed(() => {\n  return (\n    filters.sortBy !== 'newest' ||\n    filters.timeRange !== 'all' ||\n    (filters.tags && filters.tags.length > 0) ||\n    filters.authorId\n  )\n})\n\nconst activeFilterCount = computed(() => {\n  let count = 0\n  if (filters.sortBy !== 'newest') count++\n  if (filters.timeRange !== 'all') count++\n  if (filters.tags && filters.tags.length > 0) count++\n  if (filters.authorId) count++\n  return count\n})\n\n// 方法\nconst updateFilter = (key: keyof PostFilters, value: any) => {\n  postStore.updateFilters({ [key]: value })\n  emit('filters-changed', filters)\n}\n\nconst addTag = () => {\n  const tag = tagInput.value.trim()\n  if (tag && !filters.tags?.includes(tag)) {\n    const currentTags = filters.tags || []\n    updateFilter('tags', [...currentTags, tag])\n    tagInput.value = ''\n  }\n}\n\nconst removeTag = (tag: string) => {\n  const currentTags = filters.tags || []\n  updateFilter('tags', currentTags.filter(t => t !== tag))\n}\n\nconst toggleTag = (tag: string) => {\n  const currentTags = filters.tags || []\n  if (currentTags.includes(tag)) {\n    removeTag(tag)\n  } else {\n    updateFilter('tags', [...currentTags, tag])\n  }\n}\n\nconst clearAuthor = () => {\n  updateFilter('authorId', undefined)\n  emit('filters-changed', filters)\n}\n\nconst resetAllFilters = () => {\n  postStore.resetFilters()\n  tagInput.value = ''\n  emit('filters-changed', filters)\n}\n\n// 监听作者变化\nwatch(() => props.selectedAuthor, (newAuthor) => {\n  if (newAuthor) {\n    updateFilter('authorId', newAuthor.id)\n  } else {\n    updateFilter('authorId', undefined)\n  }\n})\n\n// 组件挂载时获取热门标签\nonMounted(async () => {\n  const result = await getPopularTags()\n  if (result.success) {\n    popularTags.value = result.data\n  }\n})\n</script>\n\n<style scoped>\n.post-filters {\n  background: white;\n  border: 1px solid #e9ecef;\n  border-radius: 8px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n\n.filters-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.filters-title {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #212529;\n}\n\n.filters-content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.filter-group {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.filter-label {\n  font-weight: 500;\n  color: #495057;\n  font-size: 14px;\n}\n\n.sort-options,\n.time-options {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.sort-btn,\n.time-btn {\n  padding: 8px 16px;\n  border: 1px solid #dee2e6;\n  background: white;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 14px;\n}\n\n.sort-btn:hover,\n.time-btn:hover {\n  background-color: #f8f9fa;\n  border-color: #adb5bd;\n}\n\n.sort-btn.active,\n.time-btn.active {\n  background-color: #007bff;\n  border-color: #007bff;\n  color: white;\n}\n\n.tags-section {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.selected-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.selected-tag {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  background-color: #007bff;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 16px;\n  font-size: 14px;\n}\n\n.remove-tag {\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 0;\n  display: flex;\n  align-items: center;\n}\n\n.remove-tag:hover {\n  opacity: 0.8;\n}\n\n.tags-input-group {\n  display: flex;\n  gap: 8px;\n}\n\n.tag-input {\n  flex: 1;\n}\n\n.tags-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.popular-tag {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background-color: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 14px;\n}\n\n.popular-tag:hover {\n  background-color: #e9ecef;\n}\n\n.popular-tag.selected {\n  background-color: #007bff;\n  border-color: #007bff;\n  color: white;\n}\n\n.tag-count {\n  font-size: 12px;\n  opacity: 0.7;\n}\n\n.author-section {\n  display: flex;\n  align-items: center;\n}\n\n.selected-author {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background-color: #f8f9fa;\n  border-radius: 6px;\n}\n\n.remove-author {\n  background: none;\n  border: none;\n  color: #6c757d;\n  cursor: pointer;\n  padding: 4px;\n  display: flex;\n  align-items: center;\n}\n\n.remove-author:hover {\n  color: #dc3545;\n}\n\n.active-filters-summary {\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #e9ecef;\n  text-align: center;\n}\n\n.summary-text {\n  font-size: 14px;\n  color: #6c757d;\n}\n\n@media (max-width: 768px) {\n  .post-filters {\n    padding: 16px;\n  }\n  \n  .filters-header {\n    flex-direction: column;\n    gap: 10px;\n    align-items: flex-start;\n  }\n  \n  .sort-options,\n  .time-options {\n    gap: 6px;\n  }\n  \n  .sort-btn,\n  .time-btn {\n    padding: 6px 12px;\n    font-size: 13px;\n  }\n  \n  .tags-input-group {\n    flex-direction: column;\n  }\n}\n</style>","<template>\r\n  <div class=\"home\">\r\n    <header class=\"header\">\r\n      <div class=\"container\">\r\n        <h1 class=\"logo\">连接者论坛</h1>\r\n        <nav class=\"nav\">\r\n          <RouterLink to=\"/\" class=\"nav-link\">首页</RouterLink>\r\n          <RouterLink to=\"/search\" class=\"nav-link\">\r\n            <i class=\"bi bi-search\"></i>\r\n            搜索\r\n          </RouterLink>\r\n          <RouterLink v-if=\"!isAuthenticated\" to=\"/login\" class=\"nav-link\">登录</RouterLink>\r\n          <template v-else>\r\n            <RouterLink to=\"/profile\" class=\"nav-link\">个人中心</RouterLink>\r\n            <RouterLink to=\"/bookmarks\" class=\"nav-link\">\r\n              <i class=\"bi bi-bookmark\"></i>\r\n              收藏\r\n            </RouterLink>\r\n            <RouterLink to=\"/messages\" class=\"nav-link\">\r\n              消息中心\r\n              <span v-if=\"unreadCount > 0\" class=\"unread-indicator\">{{ unreadCount }}</span>\r\n            </RouterLink>\r\n          </template>\r\n        </nav>\r\n      </div>\r\n    </header>\r\n\r\n    <main class=\"main\">\r\n      <div class=\"container\">\r\n        <!-- 快速搜索栏 -->\r\n        <div class=\"quick-search\">\r\n          <div class=\"search-input-group\">\r\n            <input\r\n              v-model=\"quickSearchQuery\"\r\n              type=\"text\"\r\n              class=\"form-control search-input\"\r\n              placeholder=\"快速搜索帖子、用户或评论...\"\r\n              @keyup.enter=\"handleQuickSearch\"\r\n            />\r\n            <button class=\"btn btn-primary search-btn\" @click=\"handleQuickSearch\">\r\n              <i class=\"bi bi-search\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 帖子筛选器 -->\r\n        <PostFilters \r\n          @filters-changed=\"handleFiltersChanged\"\r\n          class=\"post-filters-section\"\r\n        />\r\n\r\n        <div class=\"post-list\">\r\n          <div class=\"post-list-header\">\r\n            <h2>\r\n              {{ getPostListTitle() }}\r\n              <span v-if=\"totalPosts > 0\" class=\"post-count\">({{ totalPosts }})</span>\r\n            </h2>\r\n            <div class=\"header-actions\">\r\n              <button v-if=\"isAuthenticated\" @click=\"showCreatePost = true\" class=\"btn-primary\">\r\n                <i class=\"bi bi-plus-circle\"></i>\r\n                发布帖子\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <PostCard \r\n            v-for=\"post in posts\" \r\n            :key=\"post.id\" \r\n            :post=\"post\" \r\n            @like=\"handleLike\"\r\n            @comment=\"handleComment\"\r\n          />\r\n          \r\n          <div v-if=\"loading\" class=\"loading\">\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">加载中...</span>\r\n            </div>\r\n            <p>加载中...</p>\r\n          </div>\r\n          \r\n          <div v-if=\"!loading && posts.length === 0\" class=\"empty\">\r\n            <i class=\"bi bi-inbox\"></i>\r\n            <h5>暂无帖子</h5>\r\n            <p>{{ getEmptyMessage() }}</p>\r\n            <button v-if=\"isAuthenticated\" @click=\"showCreatePost = true\" class=\"btn-primary\">\r\n              发布第一个帖子\r\n            </button>\r\n          </div>\r\n\r\n          <!-- 分页 -->\r\n          <nav v-if=\"totalPages > 1\" class=\"pagination-nav\">\r\n            <ul class=\"pagination\">\r\n              <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n                <a class=\"page-link\" href=\"#\" @click.prevent=\"goToPage(currentPage - 1)\">\r\n                  <i class=\"bi bi-chevron-left\"></i>\r\n                  上一页\r\n                </a>\r\n              </li>\r\n              <li\r\n                v-for=\"page in displayedPages\"\r\n                :key=\"page\"\r\n                class=\"page-item\"\r\n                :class=\"{ active: page === currentPage }\"\r\n              >\r\n                <a class=\"page-link\" href=\"#\" @click.prevent=\"goToPage(page)\">{{ page }}</a>\r\n              </li>\r\n              <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n                <a class=\"page-link\" href=\"#\" @click.prevent=\"goToPage(currentPage + 1)\">\r\n                  下一页\r\n                  <i class=\"bi bi-chevron-right\"></i>\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <!-- 发布帖子模态框 -->\r\n    <CreatePostModal \r\n      v-if=\"showCreatePost\" \r\n      @close=\"showCreatePost = false\" \r\n      @created=\"handlePostCreated\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, computed, watch } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport { usePostStore } from '@/stores/posts'\r\nimport { useMessageStore } from '@/stores/messages'\r\nimport PostCard from '@/components/PostCard.vue'\r\nimport CreatePostModal from '@/components/CreatePostModal.vue'\r\nimport PostFilters from '@/components/PostFilters.vue'\r\nimport type { PostFilters as PostFiltersType } from '@/stores/posts'\r\n\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\nconst postStore = usePostStore()\r\nconst messageStore = useMessageStore()\r\n\r\nconst showCreatePost = ref(false)\r\nconst loading = ref(false)\r\nconst quickSearchQuery = ref('')\r\n\r\nconst isAuthenticated = computed(() => authStore.isAuthenticated)\r\nconst posts = computed(() => postStore.posts)\r\nconst unreadCount = computed(() => messageStore.unreadCount)\r\nconst totalPosts = computed(() => postStore.totalPosts)\r\nconst currentPage = computed(() => postStore.currentPage)\r\nconst pageSize = computed(() => postStore.pageSize)\r\nconst filters = computed(() => postStore.filters)\r\n\r\n// 计算总页数\r\nconst totalPages = computed(() => Math.ceil(totalPosts.value / pageSize.value))\r\n\r\n// 计算显示的页码\r\nconst displayedPages = computed(() => {\r\n  const pages = []\r\n  const start = Math.max(1, currentPage.value - 2)\r\n  const end = Math.min(totalPages.value, currentPage.value + 2)\r\n  \r\n  for (let i = start; i <= end; i++) {\r\n    pages.push(i)\r\n  }\r\n  \r\n  return pages\r\n})\r\n\r\nonMounted(async () => {\r\n  await loadPosts()\r\n  if (isAuthenticated.value) {\r\n    await messageStore.fetchUnreadCount()\r\n  }\r\n})\r\n\r\n// 监听过滤器变化\r\nwatch(filters, async () => {\r\n  await loadPosts(1) // 重置到第一页\r\n}, { deep: true })\r\n\r\nconst loadPosts = async (page = 1) => {\r\n  loading.value = true\r\n  try {\r\n    await postStore.fetchPosts(page, pageSize.value)\r\n  } catch (error) {\r\n    console.error('加载帖子失败:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst handleLike = async (postId: string) => {\r\n  if (!isAuthenticated.value) {\r\n    router.push('/login')\r\n    return\r\n  }\r\n  await postStore.toggleLike(postId)\r\n}\r\n\r\nconst handleComment = (postId: string) => {\r\n  // 跳转到帖子详情页面\r\n  router.push(`/post/${postId}`)\r\n}\r\n\r\nconst handlePostCreated = () => {\r\n  showCreatePost.value = false\r\n  loadPosts() // 重新加载帖子列表\r\n}\r\n\r\nconst handleQuickSearch = () => {\r\n  if (quickSearchQuery.value.trim()) {\r\n    router.push({\r\n      path: '/search',\r\n      query: { q: quickSearchQuery.value.trim() }\r\n    })\r\n  }\r\n}\r\n\r\nconst handleFiltersChanged = (newFilters: PostFiltersType) => {\r\n  // 过滤器变化已经在 watch 中处理\r\n}\r\n\r\nconst goToPage = async (page: number) => {\r\n  if (page < 1 || page > totalPages.value) return\r\n  await loadPosts(page)\r\n}\r\n\r\nconst getPostListTitle = () => {\r\n  if (filters.value.sortBy === 'most_liked') return '热门帖子'\r\n  if (filters.value.sortBy === 'most_commented') return '热议帖子'\r\n  if (filters.value.sortBy === 'most_viewed') return '热门浏览'\r\n  if (filters.value.sortBy === 'oldest') return '早期帖子'\r\n  if (filters.value.timeRange === 'today') return '今日帖子'\r\n  if (filters.value.timeRange === 'week') return '本周帖子'\r\n  if (filters.value.timeRange === 'month') return '本月帖子'\r\n  if (filters.value.timeRange === 'year') return '今年帖子'\r\n  if (filters.value.tags && filters.value.tags.length > 0) return '标签筛选'\r\n  return '最新帖子'\r\n}\r\n\r\nconst getEmptyMessage = () => {\r\n  if (filters.value.tags && filters.value.tags.length > 0) {\r\n    return '没有找到包含这些标签的帖子'\r\n  }\r\n  if (filters.value.timeRange !== 'all') {\r\n    return '该时间范围内暂无帖子'\r\n  }\r\n  if (filters.value.authorId) {\r\n    return '该用户暂无发布的帖子'\r\n  }\r\n  return '快来发布第一个帖子吧！'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.home {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.header {\r\n  background: white;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.header .container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem 20px;\r\n}\r\n\r\n.logo {\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  color: #1890ff;\r\n}\r\n\r\n.nav {\r\n  display: flex;\r\n  gap: 1rem;\r\n}\r\n\r\n.nav-link {\r\n  color: #333;\r\n  text-decoration: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 4px;\r\n  transition: all 0.2s;\r\n  position: relative;\r\n}\r\n\r\n.nav-link:hover {\r\n  background: rgba(24, 144, 255, 0.1);\r\n  color: #1890ff;\r\n}\r\n\r\n.unread-indicator {\r\n  position: absolute;\r\n  top: 0.25rem;\r\n  right: 0.25rem;\r\n  background: #ff4d4f;\r\n  color: white;\r\n  border-radius: 10px;\r\n  padding: 0.125rem 0.375rem;\r\n  font-size: 0.7rem;\r\n  min-width: 16px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n}\r\n\r\n.main {\r\n  padding: 2rem 0;\r\n}\r\n\r\n.post-list-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.post-list-header h2 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.btn-primary {\r\n  background: #1890ff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #40a9ff;\r\n}\r\n\r\n.quick-search {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.search-input-group {\r\n  display: flex;\r\n  gap: 12px;\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  padding: 12px 16px;\r\n  font-size: 16px;\r\n  border: 2px solid #e9ecef;\r\n  border-radius: 8px;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\n.search-input:focus {\r\n  outline: none;\r\n  border-color: #007bff;\r\n  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\r\n}\r\n\r\n.search-btn {\r\n  padding: 12px 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.post-filters-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.post-list-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.post-list-header h2 {\r\n  margin: 0;\r\n  color: #333;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.post-count {\r\n  font-size: 16px;\r\n  color: #6c757d;\r\n  font-weight: normal;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 12px;\r\n  align-items: center;\r\n}\r\n\r\n.btn-primary {\r\n  background: #1890ff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #40a9ff;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  color: #666;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.empty {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  color: #666;\r\n}\r\n\r\n.empty i {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n  display: block;\r\n  color: #dee2e6;\r\n}\r\n\r\n.empty h5 {\r\n  margin-bottom: 8px;\r\n  color: #495057;\r\n}\r\n\r\n.pagination-nav {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 32px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n\r\n.page-link {\r\n  padding: 8px 12px;\r\n  border: 1px solid #dee2e6;\r\n  background: white;\r\n  color: #495057;\r\n  text-decoration: none;\r\n  border-radius: 4px;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.page-link:hover {\r\n  background-color: #e9ecef;\r\n  border-color: #adb5bd;\r\n}\r\n\r\n.page-item.active .page-link {\r\n  background-color: #007bff;\r\n  border-color: #007bff;\r\n  color: white;\r\n}\r\n\r\n.page-item.disabled .page-link {\r\n  color: #6c757d;\r\n  pointer-events: none;\r\n  background-color: #fff;\r\n  border-color: #dee2e6;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .search-input-group {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .post-list-header {\r\n    flex-direction: column;\r\n    gap: 16px;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .header-actions {\r\n    width: 100%;\r\n    justify-content: flex-end;\r\n  }\r\n  \r\n  .pagination {\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>"],"names":["emit","__emit","postStore","usePostStore","form","ref","loading","watch","newValue","tag","isFormValid","computed","handleSubmit","result","_a","error","_createElementBlock","$emit","_createElementVNode","_hoisted_1","_cache","_hoisted_2","$event","_vModelText","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_openBlock","_hoisted_7","_Fragment","_renderList","_hoisted_8","_hoisted_9","props","__props","filters","getPopularTags","tagInput","popularTags","sortOptions","timeOptions","hasActiveFilters","activeFilterCount","count","updateFilter","key","value","addTag","currentTags","removeTag","t","toggleTag","clearAuthor","resetAllFilters","newAuthor","onMounted","option","_normalizeClass","_unref","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","tagInfo","_createTextVNode","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_createVNode","UserAvatar","_hoisted_23","_hoisted_24","router","useRouter","authStore","useAuthStore","messageStore","useMessageStore","showCreatePost","quickSearchQuery","isAuthenticated","posts","unreadCount","totalPosts","currentPage","pageSize","totalPages","displayedPages","pages","start","end","i","loadPosts","page","handleLike","postId","handleComment","handlePostCreated","handleQuickSearch","handleFiltersChanged","newFilters","goToPage","getPostListTitle","getEmptyMessage","_component_RouterLink","_createBlock","PostFilters","_hoisted_13","post","PostCard","_withModifiers","_hoisted_18","CreatePostModal"],"mappings":"2vBAwEA,MAAMA,EAAOC,EAEPC,EAAYC,EAAA,EAEZC,EAAOC,EAAI,CACf,MAAO,GACP,QAAS,GACT,UAAW,GACX,KAAM,CAAA,CAAC,CACR,EAEKC,EAAUD,EAAI,EAAK,EAGzBE,EAAM,IAAMH,EAAK,MAAM,UAAYI,GAAa,CAC1CA,EAAS,OACXJ,EAAK,MAAM,KAAOI,EACf,MAAM,GAAG,EACT,OAAWC,EAAI,KAAA,CAAM,EACrB,UAAcA,EAAI,OAAS,CAAC,EAC5B,MAAM,EAAG,CAAC,EAEbL,EAAK,MAAM,KAAO,CAAA,CAEtB,CAAC,EAGD,MAAMM,EAAcC,EAAS,IACpBP,EAAK,MAAM,MAAM,KAAA,EAAO,OAAS,GACjCA,EAAK,MAAM,QAAQ,KAAA,EAAO,OAAS,GACnCA,EAAK,MAAM,MAAM,QAAU,KAC3BA,EAAK,MAAM,QAAQ,QAAU,GACrC,EAEKQ,EAAe,SAAY,OAC/B,GAAKF,EAAY,MAEjB,CAAAJ,EAAQ,MAAQ,GAEhB,GAAI,CACF,MAAMO,EAAS,MAAMX,EAAU,WAC7BE,EAAK,MAAM,MAAM,KAAA,EACjBA,EAAK,MAAM,QAAQ,KAAA,EACnBA,EAAK,MAAM,IAAA,EAGTS,EAAO,SACTb,EAAK,SAAS,EAEdI,EAAK,MAAQ,CACX,MAAO,GACP,QAAS,GACT,UAAW,GACX,KAAM,CAAA,CAAC,GAGT,QAAMU,EAAAD,EAAO,QAAP,YAAAC,EAAc,UAAW,MAAM,CAEzC,OAASC,EAAY,CACnB,QAAQ,MAAM,UAAWA,CAAK,EAC9B,MAAM,UAAU,CAClB,QAAA,CACET,EAAQ,MAAQ,EAClB,EACF,oBAvIEU,EA2DM,MAAA,CA3DD,MAAM,gBAAiB,uBAAOC,EAAAA,MAAK,OAAA,EAAA,GACtCC,EAyDM,MAAA,CAzDD,MAAM,gBAAiB,sBAAD,IAAA,CAAA,EAAW,CAAA,MAAA,CAAA,EAAA,GACpCA,EAGM,MAHNC,GAGM,CAFJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAc,UAAV,QAAK,EAAA,GACTA,EAA4D,SAAA,CAApD,MAAM,YAAa,uBAAOD,EAAAA,MAAK,OAAA,EAAA,EAAW,GAAC,CAAA,GAGrDC,EAkDO,OAAA,CAlDA,WAAgBN,EAAY,CAAA,SAAA,CAAA,EAAE,MAAM,WAAA,GACzCM,EAWM,MAXNG,GAWM,CAVJD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAA6B,QAAA,CAAtB,IAAI,OAAA,EAAQ,KAAE,EAAA,KACrBA,EAOE,QAAA,CANA,GAAG,QACM,sBAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAE,GAAAlB,EAAA,MAAK,MAAKkB,GACnB,KAAK,OACL,YAAY,UACZ,SAAA,GACA,UAAU,KAAA,aAJD,CAAAC,EAAAnB,EAAA,MAAK,KAAK,CAAA,GAMrBc,EAA2D,OAA3DM,GAA2DC,EAA/BrB,EAAA,MAAK,MAAM,MAAM,EAAG,OAAI,CAAA,CAAA,GAGtDc,EAWM,MAXNQ,GAWM,CAVJN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAA+B,QAAA,CAAxB,IAAI,SAAA,EAAU,KAAE,EAAA,KACvBA,EAOY,WAAA,CANV,GAAG,UACM,sBAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAE,GAAAlB,EAAA,MAAK,QAAOkB,GACrB,YAAY,wBACZ,SAAA,GACA,KAAK,IACL,UAAU,MAAA,aAJD,CAAAC,EAAAnB,EAAA,MAAK,OAAO,CAAA,GAMvBc,EAA8D,OAA9DS,GAA8DF,EAAlCrB,EAAA,MAAK,QAAQ,MAAM,EAAG,QAAK,CAAA,CAAA,GAGzDc,EAaM,MAbNU,GAaM,CAZJR,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAF,EAAsC,QAAA,CAA/B,IAAI,MAAA,EAAO,eAAY,EAAA,KAC9BA,EAKE,QAAA,CAJA,GAAG,OACM,sBAAAE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAE,GAAAlB,EAAA,MAAK,UAASkB,GACvB,KAAK,OACL,YAAY,cAAA,aAFH,CAAAC,EAAAnB,EAAA,MAAK,SAAS,CAAA,GAIdA,EAAA,MAAK,KAAK,OAAM,GAA3ByB,IAAAb,EAIM,MAJNc,GAIM,EAHJD,EAAA,EAAA,EAAAb,EAEOe,EAAA,KAAAC,EAFa5B,EAAA,MAAK,KAAZK,QAAbO,EAEO,OAAA,CAFyB,IAAKP,EAAK,MAAM,aAAA,IAC3CA,CAAG,EAAA,CAAA,wBAKZS,EAOM,MAPNe,GAOM,CANJf,EAES,SAAA,CAFD,KAAK,SAAU,uBAAOD,EAAAA,MAAK,OAAA,GAAW,MAAM,eAAA,EAAgB,MAEpE,EACAC,EAES,SAAA,CAFD,KAAK,SAAU,SAAQ,CAAGR,EAAA,OAAeJ,EAAA,MAAS,MAAM,aAAA,IAC3DA,EAAA,MAAO,SAAA,IAAA,EAAA,EAAA4B,EAAA,CAAA,k0BC+EtB,MAAMC,EAAQC,EAIRpC,EAAOC,EAKPC,EAAYC,EAAA,EACZ,CAAE,QAAAkC,EAAS,eAAAC,CAAA,EAAmBpC,EAG9BqC,EAAWlC,EAAI,EAAE,EACjBmC,EAAcnC,EAAW,EAAE,EAG3BoC,EAAc,CAClB,CAAE,MAAO,SAAU,MAAO,OAAQ,KAAM,aAAA,EACxC,CAAE,MAAO,SAAU,MAAO,OAAQ,KAAM,qBAAA,EACxC,CAAE,MAAO,aAAc,MAAO,OAAQ,KAAM,kBAAA,EAC5C,CAAE,MAAO,iBAAkB,MAAO,OAAQ,KAAM,iBAAA,EAChD,CAAE,MAAO,cAAe,MAAO,OAAQ,KAAM,gBAAA,CAAiB,EAI1DC,EAAc,CAClB,CAAE,MAAO,MAAO,MAAO,MAAA,EACvB,CAAE,MAAO,QAAS,MAAO,IAAA,EACzB,CAAE,MAAO,OAAQ,MAAO,IAAA,EACxB,CAAE,MAAO,QAAS,MAAO,IAAA,EACzB,CAAE,MAAO,OAAQ,MAAO,IAAA,CAAK,EAIzBC,EAAmBhC,EAAS,IAE9B0B,EAAQ,SAAW,UACnBA,EAAQ,YAAc,OACrBA,EAAQ,MAAQA,EAAQ,KAAK,OAAS,GACvCA,EAAQ,QAEX,EAEKO,EAAoBjC,EAAS,IAAM,CACvC,IAAIkC,EAAQ,EACZ,OAAIR,EAAQ,SAAW,UAAUQ,IAC7BR,EAAQ,YAAc,OAAOQ,IAC7BR,EAAQ,MAAQA,EAAQ,KAAK,OAAS,GAAGQ,IACzCR,EAAQ,UAAUQ,IACfA,CACT,CAAC,EAGKC,EAAe,CAACC,EAAwBC,IAAe,CAC3D9C,EAAU,cAAc,CAAE,CAAC6C,CAAG,EAAGC,EAAO,EACxChD,EAAK,kBAAmBqC,CAAO,CACjC,EAEMY,EAAS,IAAM,OACnB,MAAMxC,EAAM8B,EAAS,MAAM,KAAA,EAC3B,GAAI9B,GAAO,GAACK,EAAAuB,EAAQ,OAAR,MAAAvB,EAAc,SAASL,IAAM,CACvC,MAAMyC,EAAcb,EAAQ,MAAQ,CAAA,EACpCS,EAAa,OAAQ,CAAC,GAAGI,EAAazC,CAAG,CAAC,EAC1C8B,EAAS,MAAQ,EACnB,CACF,EAEMY,EAAa1C,GAAgB,CACjC,MAAMyC,EAAcb,EAAQ,MAAQ,CAAA,EACpCS,EAAa,OAAQI,EAAY,OAAOE,GAAKA,IAAM3C,CAAG,CAAC,CACzD,EAEM4C,EAAa5C,GAAgB,CACjC,MAAMyC,EAAcb,EAAQ,MAAQ,CAAA,EAChCa,EAAY,SAASzC,CAAG,EAC1B0C,EAAU1C,CAAG,EAEbqC,EAAa,OAAQ,CAAC,GAAGI,EAAazC,CAAG,CAAC,CAE9C,EAEM6C,EAAc,IAAM,CACxBR,EAAa,WAAY,MAAS,EAClC9C,EAAK,kBAAmBqC,CAAO,CACjC,EAEMkB,EAAkB,IAAM,CAC5BrD,EAAU,aAAA,EACVqC,EAAS,MAAQ,GACjBvC,EAAK,kBAAmBqC,CAAO,CACjC,EAGA,OAAA9B,EAAM,IAAM4B,EAAM,eAAiBqB,GAAc,CAC3CA,EACFV,EAAa,WAAYU,EAAU,EAAE,EAErCV,EAAa,WAAY,MAAS,CAEtC,CAAC,EAGDW,EAAU,SAAY,CACpB,MAAM5C,EAAS,MAAMyB,EAAA,EACjBzB,EAAO,UACT2B,EAAY,MAAQ3B,EAAO,KAE/B,CAAC,UAjPCgB,EAAA,EAAAb,EAuHM,MAvHNG,GAuHM,CAtHJD,EAUM,MAVNG,GAUM,CATJD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAoC,KAAA,CAAhC,MAAM,eAAA,EAAgB,QAAK,EAAA,GAEvByB,EAAA,WADR3B,EAOS,SAAA,OALP,MAAM,mCACL,QAAOuC,CAAA,mBAERrC,EAAqC,IAAA,CAAlC,MAAM,uBAAA,EAAuB,KAAA,EAAA,IAAK,OAEvC,EAAA,CAAA,iBAGFA,EAkGM,MAlGNM,GAkGM,CAhGJN,EAcM,MAdNQ,GAcM,CAbJN,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAyC,QAAA,CAAlC,MAAM,cAAA,EAAe,QAAK,EAAA,GACjCA,EAWM,MAXNS,GAWM,MAVJX,EASSe,EAAA,KAAAC,EARUS,EAAViB,GADTxC,EASS,SAAA,CAPN,IAAKwC,EAAO,MACb,MAAKC,EAAA,CAAC,WAAU,CAAA,OACEC,EAAAvB,CAAA,EAAQ,SAAWqB,EAAO,KAAA,CAAK,CAAA,EAChD,QAAKpC,GAAEwB,EAAY,SAAWY,EAAO,KAAK,CAAA,GAE3CxC,EAA4B,IAAA,CAAxB,MAAKyC,EAAED,EAAO,IAAI,CAAA,YAAM,IAC5BjC,EAAGiC,EAAO,KAAK,EAAA,CAAA,CAAA,mBAMrBxC,EAaM,MAbNY,GAaM,CAZJV,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAyC,QAAA,CAAlC,MAAM,cAAA,EAAe,QAAK,EAAA,GACjCA,EAUM,MAVNe,GAUM,MATJjB,EAQSe,EAAA,KAAAC,EAPUU,EAAVgB,GADTxC,EAQS,SAAA,CANN,IAAKwC,EAAO,MACb,MAAKC,EAAA,CAAC,WAAU,CAAA,OACEC,EAAAvB,CAAA,EAAQ,YAAcqB,EAAO,KAAA,CAAK,CAAA,EACnD,QAAKpC,GAAEwB,EAAY,YAAcY,EAAO,KAAK,CAAA,EAE3CjC,EAAAiC,EAAO,KAAK,EAAA,GAAAxB,EAAA,YAMrBhB,EA4CM,MA5CN2C,GA4CM,CA3CJzC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAAyC,QAAA,CAAlC,MAAM,cAAA,EAAe,QAAK,EAAA,GACjCA,EAyCM,MAzCN4C,GAyCM,CAxC6BF,EAAAvB,CAAA,EAAQ,MAAQuB,KAAQ,KAAK,OAAM,GAApE/B,EAAA,EAAAb,EAWM,MAXN+C,GAWM,EAVJlC,EAAA,EAAA,EAAAb,EASOe,EAAA,KAAAC,EARS4B,EAAAvB,CAAA,EAAQ,KAAf5B,QADTO,EASO,OAAA,CAPJ,IAAKP,EACN,MAAM,cAAA,KACP,KACEgB,EAAGhB,CAAG,EAAG,IACV,CAAA,EAAAS,EAES,SAAA,CAFD,MAAM,aAAc,QAAKI,GAAE6B,EAAU1C,CAAG,CAAA,mBAC9CS,EAAuB,IAAA,CAApB,MAAM,SAAA,EAAS,KAAA,EAAA,CAAA,gCAKxBA,EA0BM,MA1BN8C,GA0BM,CAzBJ9C,EAWM,MAXN+C,GAWM,GAVJ/C,EAME,QAAA,sCALSqB,EAAQ,MAAAjB,GACjB,KAAK,OACL,MAAM,yBACN,YAAY,YACX,UAAa2B,EAAM,CAAA,OAAA,CAAA,CAAA,gBAJXV,EAAA,KAAQ,CAAA,GAMnBrB,EAES,SAAA,CAFD,MAAM,kBAAmB,QAAO+B,EAAS,SAAQ,CAAGV,EAAA,MAAS,KAAA,CAAI,EAAI,OAE7E,EAAA2B,EAAA,CAAA,GAGS1B,EAAA,MAAY,OAAM,GAA7BX,IAAAb,EAWM,MAXNmD,GAWM,QAVJnD,EASOe,EAAA,KAAAC,EARaQ,EAAA,MAAX4B,GAAO,kBADhBpD,EASO,OAAA,CAPJ,IAAKoD,EAAQ,IACd,MAAKT,EAAA,CAAC,cAAa,CAAA,UACCC,EAAAA,EAAAvB,CAAA,EAAQ,OAARuB,YAAAA,EAAc,SAASQ,EAAQ,IAAG,CAAA,CAAA,EACrD,QAAK9C,GAAE+B,EAAUe,EAAQ,GAAG,CAAA,GAC9BC,EAAA,KACE5C,EAAG2C,EAAQ,GAAG,EAAG,IAClB,CAAA,EAAAlD,EAAoD,OAApDoD,GAAwB,MAAIF,EAAQ,KAAK,EAAG,IAAC,CAAA,CAAA,mCAQ5ChC,EAAA,kBAAXP,EAAA,EAAAb,EAeM,MAfNuD,GAeM,CAdJnD,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAF,EAAyC,QAAA,CAAlC,MAAM,cAAA,EAAe,QAAK,EAAA,GACjCA,EAYM,MAZNsD,GAYM,CAXOpC,EAAA,gBAAXP,EAAA,EAAAb,EAMM,MANNyD,GAMM,CALJC,EAA+CC,GAAA,CAAlC,KAAMvC,EAAA,eAAgB,KAAK,IAAA,mBACxClB,EAA0C,OAAA,KAAAO,EAAjCW,EAAA,eAAe,QAAQ,EAAA,CAAA,EAChClB,EAES,SAAA,CAFD,MAAM,gBAAiB,QAAOoC,CAAA,mBACpCpC,EAAuB,IAAA,CAApB,MAAM,SAAA,EAAS,KAAA,EAAA,CAAA,aAGtBF,EAGS,SAAA,OAHM,MAAM,0BAA2B,uBAAOC,EAAAA,MAAK,eAAA,EAAA,mBAC1DC,EAAiC,IAAA,CAA9B,MAAM,mBAAA,EAAmB,KAAA,EAAA,IAAK,SAEnC,EAAA,CAAA,sBAMKyB,EAAA,OAAXd,EAAA,EAAAb,EAIM,MAJN4D,GAIM,CAHJ1D,EAEO,OAFP2D,GAA2B,QACrBpD,EAAGmB,EAAA,KAAiB,EAAG,UAC7B,CAAA,CAAA,giBCoBN,MAAMkC,EAASC,GAAA,EACTC,EAAYC,GAAA,EACZ/E,EAAYC,EAAA,EACZ+E,EAAeC,GAAA,EAEfC,EAAiB/E,EAAI,EAAK,EAC1BC,EAAUD,EAAI,EAAK,EACnBgF,EAAmBhF,EAAI,EAAE,EAEzBiF,EAAkB3E,EAAS,IAAMqE,EAAU,eAAe,EAC1DO,EAAQ5E,EAAS,IAAMT,EAAU,KAAK,EACtCsF,EAAc7E,EAAS,IAAMuE,EAAa,WAAW,EACrDO,EAAa9E,EAAS,IAAMT,EAAU,UAAU,EAChDwF,EAAc/E,EAAS,IAAMT,EAAU,WAAW,EAClDyF,EAAWhF,EAAS,IAAMT,EAAU,QAAQ,EAC5CmC,EAAU1B,EAAS,IAAMT,EAAU,OAAO,EAG1C0F,EAAajF,EAAS,IAAM,KAAK,KAAK8E,EAAW,MAAQE,EAAS,KAAK,CAAC,EAGxEE,EAAiBlF,EAAS,IAAM,CACpC,MAAMmF,EAAQ,CAAA,EACRC,EAAQ,KAAK,IAAI,EAAGL,EAAY,MAAQ,CAAC,EACzCM,EAAM,KAAK,IAAIJ,EAAW,MAAOF,EAAY,MAAQ,CAAC,EAE5D,QAASO,EAAIF,EAAOE,GAAKD,EAAKC,IAC5BH,EAAM,KAAKG,CAAC,EAGd,OAAOH,CACT,CAAC,EAEDrC,EAAU,SAAY,CACpB,MAAMyC,EAAA,EACFZ,EAAgB,OAClB,MAAMJ,EAAa,iBAAA,CAEvB,CAAC,EAGD3E,EAAM8B,EAAS,SAAY,CACzB,MAAM6D,EAAU,CAAC,CACnB,EAAG,CAAE,KAAM,GAAM,EAEjB,MAAMA,EAAY,MAAOC,EAAO,IAAM,CACpC7F,EAAQ,MAAQ,GAChB,GAAI,CACF,MAAMJ,EAAU,WAAWiG,EAAMR,EAAS,KAAK,CACjD,OAAS5E,EAAO,CACd,QAAQ,MAAM,UAAWA,CAAK,CAChC,QAAA,CACET,EAAQ,MAAQ,EAClB,CACF,EAEM8F,EAAa,MAAOC,GAAmB,CAC3C,GAAI,CAACf,EAAgB,MAAO,CAC1BR,EAAO,KAAK,QAAQ,EACpB,MACF,CACA,MAAM5E,EAAU,WAAWmG,CAAM,CACnC,EAEMC,EAAiBD,GAAmB,CAExCvB,EAAO,KAAK,SAASuB,CAAM,EAAE,CAC/B,EAEME,EAAoB,IAAM,CAC9BnB,EAAe,MAAQ,GACvBc,EAAA,CACF,EAEMM,EAAoB,IAAM,CAC1BnB,EAAiB,MAAM,QACzBP,EAAO,KAAK,CACV,KAAM,UACN,MAAO,CAAE,EAAGO,EAAiB,MAAM,MAAK,CAAE,CAC3C,CAEL,EAEMoB,EAAwBC,GAAgC,CAE9D,EAEMC,EAAW,MAAOR,GAAiB,CACnCA,EAAO,GAAKA,EAAOP,EAAW,OAClC,MAAMM,EAAUC,CAAI,CACtB,EAEMS,EAAmB,IACnBvE,EAAQ,MAAM,SAAW,aAAqB,OAC9CA,EAAQ,MAAM,SAAW,iBAAyB,OAClDA,EAAQ,MAAM,SAAW,cAAsB,OAC/CA,EAAQ,MAAM,SAAW,SAAiB,OAC1CA,EAAQ,MAAM,YAAc,QAAgB,OAC5CA,EAAQ,MAAM,YAAc,OAAe,OAC3CA,EAAQ,MAAM,YAAc,QAAgB,OAC5CA,EAAQ,MAAM,YAAc,OAAe,OAC3CA,EAAQ,MAAM,MAAQA,EAAQ,MAAM,KAAK,OAAS,EAAU,OACzD,OAGHwE,EAAkB,IAClBxE,EAAQ,MAAM,MAAQA,EAAQ,MAAM,KAAK,OAAS,EAC7C,gBAELA,EAAQ,MAAM,YAAc,MACvB,aAELA,EAAQ,MAAM,SACT,aAEF,qDA5PP,OAAAR,EAAA,EAAAb,EA2HM,MA3HNG,GA2HM,CA1HJD,EAuBS,SAvBTG,GAuBS,CAtBPH,EAqBM,MArBNM,GAqBM,CApBJJ,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAF,EAA2B,KAAA,CAAvB,MAAM,MAAA,EAAO,QAAK,EAAA,GACtBA,EAkBM,MAlBNQ,GAkBM,CAjBJgD,EAAmDoC,EAAA,CAAvC,GAAG,IAAI,MAAM,UAAA,aAAW,IAAE,CAAA,GAAA1F,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAF,KAAE,EAAA,CAAA,WACtCsD,EAGaoC,EAAA,CAHD,GAAG,UAAU,MAAM,UAAA,aAC7B,IAA4B,CAAA,GAAA1F,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAA5BF,EAA4B,IAAA,CAAzB,MAAM,cAAA,EAAc,KAAA,EAAA,IAAK,OAE9B,EAAA,CAAA,WACmBoE,EAAA,WACnBtE,EAUWe,EAAA,CAAA,IAAA,GAAA,CATT2C,EAA4DoC,EAAA,CAAhD,GAAG,WAAW,MAAM,UAAA,aAAW,IAAI,CAAA,GAAA1F,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAJ,OAAI,EAAA,CAAA,WAC/CsD,EAGaoC,EAAA,CAHD,GAAG,aAAa,MAAM,UAAA,aAChC,IAA8B,CAAA,GAAA1F,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAA9BF,EAA8B,IAAA,CAA3B,MAAM,gBAAA,EAAgB,KAAA,EAAA,IAAK,OAEhC,EAAA,CAAA,WACAwD,EAGaoC,EAAA,CAHD,GAAG,YAAY,MAAM,UAAA,aAAW,IAE1C,iBAF0C,SAE1C,EAAA,GAAYtB,EAAA,MAAW,OAAvBxE,EAA8E,OAA9EW,GAA8EF,EAArB+D,EAAA,KAAW,EAAA,CAAA,+BATxEuB,EAAgFD,EAAA,OAA5C,GAAG,SAAS,MAAM,UAAA,aAAW,IAAE,CAAA,GAAA1F,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAF,KAAE,EAAA,CAAA,kBAgBzEF,EAyFO,OAzFPU,GAyFO,CAxFLV,EAuFM,MAvFNY,GAuFM,CArFJZ,EAaM,MAbNe,GAaM,CAZJf,EAWM,MAXNgB,GAWM,GAVJhB,EAME,QAAA,sCALSmE,EAAgB,MAAA/D,GACzB,KAAK,OACL,MAAM,4BACN,YAAY,kBACX,UAAakF,EAAiB,CAAA,OAAA,CAAA,CAAA,gBAJtBnB,EAAA,KAAgB,CAAA,GAM3BnE,EAES,SAAA,CAFD,MAAM,6BAA8B,QAAOsF,CAAA,qBACjDtF,EAA4B,IAAA,CAAzB,MAAM,cAAA,EAAc,KAAA,EAAA,CAAA,SAM7BwD,EAGEsC,GAAA,CAFC,iBAAiBP,EAClB,MAAM,sBAAA,GAGRvF,EA+DM,MA/DN2C,GA+DM,CA9DJ3C,EAWM,MAXN4C,GAWM,CAVJ5C,EAGK,KAAA,KAAA,CAFAmD,EAAA5C,EAAAmF,EAAA,GAAqB,IACxB,CAAA,EAAYnB,EAAA,MAAU,GAAtB5D,IAAAb,EAAwE,OAAxE+C,GAA+C,IAACtC,EAAGgE,EAAA,KAAU,EAAG,IAAC,CAAA,cAEnEvE,EAKM,MALN+F,GAKM,CAJU3B,EAAA,WAAdtE,EAGS,SAAA,OAHuB,uBAAOoE,EAAA,MAAc,IAAS,MAAM,aAAA,qBAClElE,EAAiC,IAAA,CAA9B,MAAM,mBAAA,EAAmB,KAAA,EAAA,IAAK,SAEnC,EAAA,CAAA,0BAIJF,EAMEe,EAAA,KAAAC,EALeuD,EAAA,MAAR2B,QADTH,EAMEI,GAAA,CAJC,IAAKD,EAAK,GACV,KAAAA,EACA,OAAMd,EACN,UAASE,CAAA,2BAGDhG,EAAA,OAAXuB,IAAAb,EAKM,MALNgD,GAKM,CAAA,GAAA5C,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,CAJJF,EAEM,MAAA,CAFD,MAAM,8BAA8B,KAAK,QAAA,GAC5CA,EAA2C,OAAA,CAArC,MAAM,iBAAA,EAAkB,QAAM,CAAA,MAEtCA,EAAa,SAAV,SAAM,EAAA,CAAA,gBAGCZ,EAAA,OAAWiF,EAAA,MAAM,SAAM,GAAnC1D,EAAA,EAAAb,EAOM,MAPNiD,GAOM,eANJ/C,EAA2B,IAAA,CAAxB,MAAM,aAAA,EAAa,KAAA,EAAA,GACtBE,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAF,EAAa,UAAT,OAAI,EAAA,GACRA,EAA8B,WAAxB2F,EAAA,CAAe,EAAA,CAAA,EACPvB,EAAA,WAAdtE,EAES,SAAA,OAFuB,uBAAOoE,EAAA,MAAc,IAAS,MAAM,aAAA,EAAc,WAElF,wBAISQ,EAAA,MAAU,GAArB/D,IAAAb,EAuBM,MAvBNkD,GAuBM,CAtBJhD,EAqBK,KArBLiD,GAqBK,CApBHjD,EAKK,KAAA,CALD,MAAKyC,EAAA,CAAC,YAAW,CAAA,SAAqB+B,EAAA,QAAW,EAAA,CAAA,CAAA,GACnDxE,EAGI,IAAA,CAHD,MAAM,YAAY,KAAK,IAAK,QAAKE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAgG,EAAA9F,GAAUqF,EAASjB,EAAA,MAAW,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,qBAChExE,EAAkC,IAAA,CAA/B,MAAM,oBAAA,EAAoB,KAAA,EAAA,IAAK,QAEpC,EAAA,CAAA,gBAEFF,EAOKe,EAAA,KAAAC,EANY6D,EAAA,MAARM,QADTnF,EAOK,KAAA,CALF,IAAKmF,EACN,MAAKxC,EAAA,CAAC,YAAW,CAAA,OACCwC,IAAST,EAAA,MAAW,CAAA,CAAA,GAEtCxE,EAA4E,IAAA,CAAzE,MAAM,YAAY,KAAK,IAAK,QAAKkG,EAAA9F,IAAUqF,EAASR,CAAI,EAAA,CAAA,SAAA,CAAA,CAAA,IAAMA,CAAI,EAAA,EAAAkB,EAAA,CAAA,aAEvEnG,EAKK,KAAA,CALD,MAAKyC,EAAA,CAAC,YAAW,CAAA,SAAqB+B,EAAA,QAAgBE,EAAA,MAAU,CAAA,CAAA,GAClE1E,EAGI,IAAA,CAHD,MAAM,YAAY,KAAK,IAAK,QAAKE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAgG,EAAA9F,GAAUqF,EAASjB,EAAA,MAAW,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,uBAAO,QAEvE,EAAA,EAAAxE,EAAmC,IAAA,CAAhC,MAAM,qBAAA,EAAqB,KAAA,EAAA,CAAA,6BAWpCkE,EAAA,WADR2B,EAIEO,GAAA,OAFC,uBAAOlC,EAAA,MAAc,IACrB,UAASmB,CAAA"}