{"version":3,"file":"MessageCenterView-D-9rBfcd.js","sources":["../../src/views/MessageCenterView.vue"],"sourcesContent":["<template>\r\n  <div class=\"message-center\">\r\n    <header class=\"header\">\r\n      <div class=\"container\">\r\n        <div class=\"header-nav\">\r\n          <RouterLink to=\"/\" class=\"back-link\">← 返回首页</RouterLink>\r\n          <nav class=\"nav\">\r\n            <RouterLink to=\"/profile\" class=\"nav-link\">\r\n              <i class=\"bi bi-person\"></i>\r\n              个人中心\r\n            </RouterLink>\r\n            <RouterLink to=\"/bookmarks\" class=\"nav-link\">\r\n              <i class=\"bi bi-bookmark\"></i>\r\n              收藏\r\n            </RouterLink>\r\n            <RouterLink to=\"/messages\" class=\"nav-link active\">\r\n              <i class=\"bi bi-envelope\"></i>\r\n              消息\r\n              <span v-if=\"unreadCount > 0\" class=\"unread-indicator\">{{ unreadCount }}</span>\r\n            </RouterLink>\r\n          </nav>\r\n        </div>\r\n        <h1>消息中心</h1>\r\n      </div>\r\n    </header>\r\n\r\n    <main class=\"main\">\r\n      <div class=\"container\">\r\n        <div class=\"message-layout\">\r\n          <!-- 侧边栏 -->\r\n          <aside class=\"sidebar\">\r\n            <div class=\"sidebar-tabs\">\r\n              <button \r\n                class=\"tab-btn\"\r\n                :class=\"{ active: activeTab === 'conversations' }\"\r\n                @click=\"activeTab = 'conversations'\"\r\n              >\r\n                💬 私信\r\n                <span v-if=\"unreadCount > 0\" class=\"unread-badge\">{{ unreadCount }}</span>\r\n              </button>\r\n              <button \r\n                class=\"tab-btn\"\r\n                :class=\"{ active: activeTab === 'bookmarks' }\"\r\n                @click=\"activeTab = 'bookmarks'\"\r\n              >\r\n                🔖 收藏\r\n              </button>\r\n            </div>\r\n\r\n            <!-- 私信列表 -->\r\n            <div v-if=\"activeTab === 'conversations'\" class=\"conversation-list\">\r\n              <div class=\"search-box\">\r\n                <input\r\n                  v-model=\"userSearchQuery\"\r\n                  type=\"text\"\r\n                  placeholder=\"搜索用户...\"\r\n                  @input=\"searchUsers\"\r\n                />\r\n                <div v-if=\"searchResults.length > 0\" class=\"search-results\">\r\n                  <div\r\n                    v-for=\"user in searchResults\"\r\n                    :key=\"user.id\"\r\n                    class=\"search-result-item\"\r\n                    @click=\"startNewConversation(user)\"\r\n                  >\r\n                    <UserAvatar :username=\"user.username\" :avatar-id=\"user.avatar_url\" size=\"32px\" />\r\n                    <span>{{ user.username }}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"conversations.length === 0\" class=\"empty-state\">\r\n                <p>暂无私信对话</p>\r\n              </div>\r\n              <div\r\n                v-for=\"conversation in conversations\"\r\n                :key=\"conversation.id\"\r\n                class=\"conversation-item\"\r\n                :class=\"{ active: selectedConversationId === conversation.id }\"\r\n                @click=\"selectConversation(conversation.id)\"\r\n              >\r\n                <UserAvatar \r\n                  :username=\"conversation.other_user?.username || '用户'\" \r\n                  :avatar-id=\"conversation.other_user?.avatar_url\"\r\n                  size=\"40px\"\r\n                />\r\n                <div class=\"conversation-info\">\r\n                  <div class=\"conversation-header\">\r\n                    <span class=\"username\">{{ conversation.other_user?.username }}</span>\r\n                    <span class=\"time\">{{ formatTime(conversation.last_message_at) }}</span>\r\n                  </div>\r\n                  <div class=\"last-message\">\r\n                    {{ conversation.last_message?.content || '暂无消息' }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"conversation-meta\">\r\n                  <span v-if=\"conversation.unread_count > 0\" class=\"unread-count\">\r\n                    {{ conversation.unread_count }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 收藏列表 -->\r\n            <div v-if=\"activeTab === 'bookmarks'\" class=\"bookmark-list\">\r\n              <div class=\"folder-selector\">\r\n                <select v-model=\"selectedFolder\" @change=\"loadBookmarks\">\r\n                  <option v-for=\"folder in folders\" :key=\"folder\" :value=\"folder\">\r\n                    {{ folder }}\r\n                  </option>\r\n                </select>\r\n                <button @click=\"showCreateFolderDialog = true\" class=\"create-folder-btn\">\r\n                  + 新建文件夹\r\n                </button>\r\n              </div>\r\n\r\n              <div v-if=\"bookmarks.length === 0\" class=\"empty-state\">\r\n                <p>暂无收藏内容</p>\r\n              </div>\r\n              <div\r\n                v-for=\"bookmark in bookmarks\"\r\n                :key=\"bookmark.id\"\r\n                class=\"bookmark-item\"\r\n                @click=\"openBookmark(bookmark)\"\r\n              >\r\n                <div class=\"bookmark-content\">\r\n                  <h4 v-if=\"bookmark.target_type === 'post'\">\r\n                    {{ bookmark.target_data?.title }}\r\n                  </h4>\r\n                  <p class=\"bookmark-excerpt\">\r\n                    {{ getBookmarkExcerpt(bookmark) }}\r\n                  </p>\r\n                  <div class=\"bookmark-meta\">\r\n                    <span class=\"bookmark-type\">\r\n                      {{ bookmark.target_type === 'post' ? '帖子' : '评论' }}\r\n                    </span>\r\n                    <span class=\"bookmark-time\">{{ formatTime(bookmark.created_at) }}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"bookmark-actions\">\r\n                  <button @click.stop=\"removeBookmark(bookmark.id)\" class=\"remove-btn\">\r\n                    取消收藏\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </aside>\r\n\r\n          <!-- 主内容区 -->\r\n          <section class=\"content\">\r\n            <!-- 私信对话 -->\r\n            <div v-if=\"activeTab === 'conversations'\" class=\"conversation-view\">\r\n              <div v-if=\"!selectedConversationId\" class=\"empty-conversation\">\r\n                <p>选择一个对话开始聊天</p>\r\n              </div>\r\n              <div v-else class=\"chat-container\">\r\n                <div class=\"chat-header\">\r\n                  <UserAvatar \r\n                    :username=\"selectedConversation?.other_user?.username || '用户'\" \r\n                    :avatar-id=\"selectedConversation?.other_user?.avatar_url\"\r\n                    size=\"32px\"\r\n                  />\r\n                  <span class=\"chat-username\">\r\n                    {{ selectedConversation?.other_user?.username }}\r\n                  </span>\r\n                  <button @click=\"deleteCurrentConversation\" class=\"delete-conversation-btn\">\r\n                    删除对话\r\n                  </button>\r\n                </div>\r\n\r\n                <div class=\"messages-container\" ref=\"messagesContainer\">\r\n                  <div\r\n                    v-for=\"message in currentMessages\"\r\n                    :key=\"message.id\"\r\n                    class=\"message\"\r\n                    :class=\"{ 'is-sent': message.sender_id === currentUserId }\"\r\n                  >\r\n                    <UserAvatar \r\n                      :username=\"message.sender_profile?.username || '用户'\" \r\n                      :avatar-id=\"message.sender_profile?.avatar_url\"\r\n                      size=\"32px\"\r\n                    />\r\n                    <div class=\"message-content\">\r\n                      <div class=\"message-bubble\">\r\n                        {{ message.content }}\r\n                      </div>\r\n                      <span class=\"message-time\">{{ formatTime(message.created_at) }}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"message-input\">\r\n                  <div class=\"input-wrapper\">\r\n                    <textarea\r\n                      v-model=\"newMessage\"\r\n                      placeholder=\"输入消息...\"\r\n                      rows=\"3\"\r\n                      @keydown.ctrl.enter=\"sendMessage\"\r\n                    ></textarea>\r\n                    <div class=\"input-actions\">\r\n                      <span class=\"input-hint\">Ctrl + Enter 发送</span>\r\n                      <button \r\n                        @click=\"sendMessage\"\r\n                        :disabled=\"!newMessage.trim()\"\r\n                        class=\"send-btn\"\r\n                      >\r\n                        发送\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 收藏详情 -->\r\n            <div v-if=\"activeTab === 'bookmarks'\" class=\"bookmark-view\">\r\n              <div v-if=\"!selectedBookmark\" class=\"empty-bookmark\">\r\n                <p>选择一个收藏查看详情</p>\r\n              </div>\r\n              <div v-else class=\"bookmark-detail\">\r\n                <div class=\"bookmark-header\">\r\n                  <h3 v-if=\"selectedBookmark.target_type === 'post'\">\r\n                    {{ selectedBookmark.target_data?.title }}\r\n                  </h3>\r\n                  <div class=\"bookmark-info\">\r\n                    <span class=\"bookmark-type\">\r\n                      {{ selectedBookmark.target_type === 'post' ? '帖子' : '评论' }}\r\n                    </span>\r\n                    <span class=\"bookmark-folder\">{{ selectedBookmark.folder_name }}</span>\r\n                    <span class=\"bookmark-time\">{{ formatTime(selectedBookmark.created_at) }}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"bookmark-content-full\">\r\n                  {{ selectedBookmark.target_data?.content }}\r\n                </div>\r\n                <div class=\"bookmark-note\">\r\n                  <label>备注：</label>\r\n                  <textarea\r\n                    v-model=\"bookmarkNote\"\r\n                    placeholder=\"添加备注...\"\r\n                    @blur=\"updateBookmarkNote\"\r\n                  ></textarea>\r\n                </div>\r\n                <div class=\"bookmark-actions\">\r\n                  <button @click=\"removeBookmark(selectedBookmark.id)\" class=\"remove-btn\">\r\n                    取消收藏\r\n                  </button>\r\n                  <button \r\n                    v-if=\"selectedBookmark.target_type === 'post'\"\r\n                    @click=\"goToPost(selectedBookmark.target_id)\"\r\n                    class=\"view-btn\"\r\n                  >\r\n                    查看原帖\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <!-- 创建收藏夹对话框 -->\r\n    <div v-if=\"showCreateFolderDialog\" class=\"modal-overlay\" @click.self=\"showCreateFolderDialog = false\">\r\n      <div class=\"modal-content\">\r\n        <h3>新建收藏夹</h3>\r\n        <input\r\n          v-model=\"newFolderName\"\r\n          type=\"text\"\r\n          placeholder=\"收藏夹名称\"\r\n          @keydown.enter=\"createFolder\"\r\n        />\r\n        <div class=\"modal-actions\">\r\n          <button @click=\"showCreateFolderDialog = false\" class=\"btn-secondary\">\r\n            取消\r\n          </button>\r\n          <button @click=\"createFolder\" :disabled=\"!newFolderName.trim()\" class=\"btn-primary\">\r\n            创建\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, watch, nextTick } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport { useMessageStore } from '@/stores/messages'\r\nimport { useBookmarkStore } from '@/stores/bookmarks'\r\nimport UserAvatar from '@/components/UserAvatar.vue'\r\n\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\nconst messageStore = useMessageStore()\r\nconst bookmarkStore = useBookmarkStore()\r\n\r\nconst activeTab = ref<'conversations' | 'bookmarks'>('conversations')\r\nconst selectedConversationId = ref<string>('')\r\nconst selectedBookmark = ref<any>(null)\r\nconst newMessage = ref('')\r\nconst userSearchQuery = ref('')\r\nconst searchResults = ref<any[]>([])\r\nconst selectedFolder = ref('默认收藏夹')\r\nconst bookmarkNote = ref('')\r\nconst showCreateFolderDialog = ref(false)\r\nconst newFolderName = ref('')\r\nconst messagesContainer = ref<HTMLElement>()\r\n\r\nconst conversations = computed(() => {\r\n  const convs = messageStore.conversations\r\n  console.log('conversations computed:', convs.length, convs)\r\n  return convs\r\n})\r\nconst currentMessages = computed(() => messageStore.currentMessages)\r\nconst unreadCount = computed(() => messageStore.unreadCount)\r\nconst bookmarks = computed(() => bookmarkStore.bookmarks)\r\nconst folders = computed(() => bookmarkStore.folders)\r\nconst currentUserId = computed(() => authStore.user?.id || '')\r\n\r\nconst selectedConversation = computed(() => \r\n  conversations.value.find(c => c.id === selectedConversationId.value)\r\n)\r\n\r\nonMounted(() => {\r\n  loadInitialData()\r\n})\r\n\r\nconst loadInitialData = async () => {\r\n  try {\r\n    // 确保用户已登录，如果未登录则跳转到登录页\r\n    if (!authStore.isAuthenticated) {\r\n      console.warn('用户未登录，跳转到登录页面')\r\n      router.push('/login')\r\n      return\r\n    }\r\n    \r\n    console.log('开始加载消息中心数据...')\r\n    \r\n    await Promise.all([\r\n      messageStore.fetchConversations().catch(err => {\r\n        console.error('获取会话失败:', err)\r\n        return { success: false }\r\n      }),\r\n      messageStore.fetchUnreadCount().catch(err => {\r\n        console.error('获取未读数量失败:', err)\r\n        return { success: false }\r\n      }),\r\n      bookmarkStore.fetchFolders().catch(err => {\r\n        console.error('获取收藏夹失败:', err)\r\n        return { success: false }\r\n      }),\r\n      loadBookmarks().catch(err => {\r\n        console.error('加载收藏失败:', err)\r\n        return { success: false }\r\n      })\r\n    ])\r\n    \r\n    console.log('消息中心数据加载完成')\r\n  } catch (error) {\r\n    console.error('加载初始数据失败:', error)\r\n  }\r\n}\r\n\r\nconst loadBookmarks = async () => {\r\n  await bookmarkStore.fetchBookmarks(selectedFolder.value)\r\n}\r\n\r\nconst selectConversation = async (conversationId: string) => {\r\n  console.log('选择对话:', conversationId)\r\n  selectedConversationId.value = conversationId\r\n  \r\n  const result = await messageStore.fetchMessages(conversationId)\r\n  console.log('获取消息结果:', result)\r\n  \r\n  // 标记消息为已读\r\n  const conversation = conversations.value.find(c => c.id === conversationId)\r\n  console.log('找到的对话:', conversation)\r\n  if (conversation && conversation.other_user) {\r\n    console.log('对话的other_user:', conversation.other_user)\r\n    console.log('other_user.id:', conversation.other_user.id)\r\n    if (conversation.other_user.id) {\r\n      await messageStore.markMessagesAsRead(conversation.other_user.id)\r\n    } else {\r\n      console.warn('other_user.id 为空，跳过标记已读')\r\n    }\r\n  } else {\r\n    console.warn('对话或other_user不存在:', { conversation, conversationId })\r\n  }\r\n  \r\n  // 滚动到底部\r\n  nextTick(() => {\r\n    if (messagesContainer.value) {\r\n      messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight\r\n    }\r\n  })\r\n}\r\n\r\nconst sendMessage = async () => {\r\n  if (!newMessage.value.trim()) return\r\n  \r\n  const conversation = selectedConversation.value\r\n  if (!conversation || !conversation.other_user) return\r\n  \r\n  const result = await messageStore.sendMessage(\r\n    conversation.other_user.id,\r\n    newMessage.value.trim()\r\n  )\r\n  \r\n  if (result.success) {\r\n    newMessage.value = ''\r\n    // 滚动到底部\r\n    nextTick(() => {\r\n      if (messagesContainer.value) {\r\n        messagesContainer.value.scrollTop = messagesContainer.value.scrollHeight\r\n      }\r\n    })\r\n  } else {\r\n    alert('发送失败: ' + result.error)\r\n  }\r\n}\r\n\r\nconst searchUsers = async () => {\r\n  if (!userSearchQuery.value.trim()) {\r\n    searchResults.value = []\r\n    return\r\n  }\r\n  \r\n  const result = await messageStore.searchUsers(userSearchQuery.value.trim())\r\n  if (result.success) {\r\n    searchResults.value = result.data\r\n  }\r\n}\r\n\r\nconst startNewConversation = async (user: any) => {\r\n  // 这里可以创建新会话或直接跳转到对话\r\n  searchResults.value = []\r\n  userSearchQuery.value = ''\r\n  \r\n  // 查找是否已有会话\r\n  const existingConversation = conversations.value.find(c => \r\n    c.other_user?.id === user.id\r\n  )\r\n  \r\n  if (existingConversation) {\r\n    selectConversation(existingConversation.id)\r\n  } else {\r\n    // 创建新会话的逻辑可以在这里实现\r\n    alert('会话功能将在发送第一条消息时自动创建')\r\n  }\r\n}\r\n\r\nconst deleteCurrentConversation = async () => {\r\n  if (!selectedConversationId.value) return\r\n  \r\n  if (!confirm('确定要删除这个对话吗？')) return\r\n  \r\n  const result = await messageStore.deleteConversation(selectedConversationId.value)\r\n  if (result.success) {\r\n    selectedConversationId.value = ''\r\n  } else {\r\n    alert('删除失败: ' + result.error)\r\n  }\r\n}\r\n\r\nconst openBookmark = (bookmark: any) => {\r\n  selectedBookmark.value = bookmark\r\n  bookmarkNote.value = bookmark.note || ''\r\n}\r\n\r\nconst removeBookmark = async (bookmarkId: string) => {\r\n  if (!confirm('确定要取消收藏吗？')) return\r\n  \r\n  const result = await bookmarkStore.removeBookmark(bookmarkId)\r\n  if (result.success) {\r\n    if (selectedBookmark.value?.id === bookmarkId) {\r\n      selectedBookmark.value = null\r\n    }\r\n  } else {\r\n    alert('取消收藏失败: ' + result.error)\r\n  }\r\n}\r\n\r\nconst updateBookmarkNote = async () => {\r\n  if (!selectedBookmark.value) return\r\n  \r\n  await bookmarkStore.updateBookmarkNote(selectedBookmark.value.id, bookmarkNote.value)\r\n}\r\n\r\nconst createFolder = async () => {\r\n  if (!newFolderName.value.trim()) return\r\n  \r\n  const result = bookmarkStore.createFolder(newFolderName.value.trim())\r\n  if (result.success) {\r\n    newFolderName.value = ''\r\n    showCreateFolderDialog.value = false\r\n  } else {\r\n    alert('创建收藏夹失败: ' + result.error)\r\n  }\r\n}\r\n\r\nconst goToPost = (postId: string) => {\r\n  router.push(`/post/${postId}`)\r\n}\r\n\r\nconst getBookmarkExcerpt = (bookmark: any) => {\r\n  const content = bookmark.target_data?.content || ''\r\n  return content.length > 100 ? content.substring(0, 100) + '...' : content\r\n}\r\n\r\nconst formatTime = (timestamp: string) => {\r\n  const date = new Date(timestamp)\r\n  const now = new Date()\r\n  const diff = now.getTime() - date.getTime()\r\n  \r\n  if (diff < 60000) return '刚刚'\r\n  if (diff < 3600000) return `${Math.floor(diff / 60000)}分钟前`\r\n  if (diff < 86400000) return `${Math.floor(diff / 3600000)}小时前`\r\n  if (diff < 604800000) return `${Math.floor(diff / 86400000)}天前`\r\n  \r\n  return date.toLocaleDateString('zh-CN')\r\n}\r\n\r\n// 监听当前用户变化，重新加载数据\r\nwatch(() => authStore.user, () => {\r\n  if (authStore.user) {\r\n    loadInitialData()\r\n  }\r\n}, { immediate: true })\r\n</script>\r\n\r\n<style scoped>\r\n.message-center {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.header {\r\n  background: white;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  padding: 1rem 0;\r\n}\r\n\r\n.container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n}\r\n\r\n.header-nav {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.nav {\r\n  display: flex;\r\n  gap: 1rem;\r\n}\r\n\r\n.nav-link {\r\n  color: #666;\r\n  text-decoration: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 4px;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.nav-link:hover {\r\n  background: rgba(24, 144, 255, 0.1);\r\n  color: #1890ff;\r\n}\r\n\r\n.nav-link.active {\r\n  background: #1890ff;\r\n  color: white;\r\n}\r\n\r\n.unread-indicator {\r\n  position: relative;\r\n  top: -8px;\r\n  right: -8px;\r\n  background: #ff4d4f;\r\n  color: white;\r\n  border-radius: 10px;\r\n  padding: 0.125rem 0.375rem;\r\n  font-size: 0.7rem;\r\n  min-width: 16px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n}\r\n\r\n.back-link {\r\n  color: #1890ff;\r\n  text-decoration: none;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.back-link:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.header h1 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.main {\r\n  padding: 2rem 0;\r\n}\r\n\r\n.message-layout {\r\n  display: grid;\r\n  grid-template-columns: 350px 1fr;\r\n  gap: 2rem;\r\n  height: calc(100vh - 200px);\r\n}\r\n\r\n.sidebar {\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.sidebar-tabs {\r\n  display: flex;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.tab-btn {\r\n  flex: 1;\r\n  padding: 1rem;\r\n  border: none;\r\n  background: none;\r\n  cursor: pointer;\r\n  position: relative;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.tab-btn.active {\r\n  color: #1890ff;\r\n  border-bottom: 2px solid #1890ff;\r\n}\r\n\r\n.tab-btn:hover {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.unread-badge {\r\n  position: absolute;\r\n  top: 0.5rem;\r\n  right: 0.5rem;\r\n  background: #ff4d4f;\r\n  color: white;\r\n  border-radius: 10px;\r\n  padding: 0.125rem 0.375rem;\r\n  font-size: 0.75rem;\r\n  min-width: 18px;\r\n  text-align: center;\r\n}\r\n\r\n.search-box {\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  position: relative;\r\n}\r\n\r\n.search-box input {\r\n  width: 100%;\r\n  padding: 0.5rem;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.search-results {\r\n  position: absolute;\r\n  top: 100%;\r\n  left: 1rem;\r\n  right: 1rem;\r\n  background: white;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  z-index: 10;\r\n}\r\n\r\n.search-result-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.75rem;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.search-result-item:hover {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.conversation-list,\r\n.bookmark-list {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n}\r\n\r\n.conversation-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  padding: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  position: relative;\r\n}\r\n\r\n.conversation-item:hover {\r\n  background: #f8f9fa;\r\n  transform: translateX(2px);\r\n}\r\n\r\n.conversation-item.active {\r\n  background: #e6f7ff;\r\n  border-left: 3px solid #1890ff;\r\n}\r\n\r\n.conversation-item::before {\r\n  content: '';\r\n  position: absolute;\r\n  right: 1rem;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  width: 6px;\r\n  height: 6px;\r\n  border-right: 2px solid #ccc;\r\n  border-bottom: 2px solid #ccc;\r\n  transform: translateY(-50%) rotate(-45deg);\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.conversation-item:hover::before {\r\n  opacity: 1;\r\n}\r\n\r\n.conversation-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.conversation-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.username {\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.time {\r\n  font-size: 0.8rem;\r\n  color: #999;\r\n}\r\n\r\n.last-message {\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.unread-count {\r\n  background: #1890ff;\r\n  color: white;\r\n  border-radius: 10px;\r\n  padding: 0.125rem 0.375rem;\r\n  font-size: 0.75rem;\r\n  min-width: 18px;\r\n  text-align: center;\r\n}\r\n\r\n.folder-selector {\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.folder-selector select {\r\n  flex: 1;\r\n  padding: 0.5rem;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 4px;\r\n}\r\n\r\n.create-folder-btn {\r\n  padding: 0.5rem 1rem;\r\n  border: 1px solid #1890ff;\r\n  background: none;\r\n  color: #1890ff;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.create-folder-btn:hover {\r\n  background: #e6f7ff;\r\n}\r\n\r\n.bookmark-item {\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.bookmark-item:hover {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.bookmark-content h4 {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #333;\r\n  font-size: 1rem;\r\n}\r\n\r\n.bookmark-excerpt {\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n  margin-bottom: 0.5rem;\r\n  line-height: 1.4;\r\n}\r\n\r\n.bookmark-meta {\r\n  display: flex;\r\n  gap: 1rem;\r\n  font-size: 0.8rem;\r\n  color: #999;\r\n}\r\n\r\n.bookmark-actions {\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.remove-btn {\r\n  background: none;\r\n  border: 1px solid #ff4d4f;\r\n  color: #ff4d4f;\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.remove-btn:hover {\r\n  background: #fff1f0;\r\n}\r\n\r\n.content {\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.empty-conversation,\r\n.empty-bookmark {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  color: #999;\r\n}\r\n\r\n.chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.chat-username {\r\n  font-weight: 600;\r\n  color: #333;\r\n  flex: 1;\r\n}\r\n\r\n.delete-conversation-btn {\r\n  background: none;\r\n  border: 1px solid #ff4d4f;\r\n  color: #ff4d4f;\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.delete-conversation-btn:hover {\r\n  background: #fff1f0;\r\n}\r\n\r\n.messages-container {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 1rem;\r\n}\r\n\r\n.message {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.message.is-sent {\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.message-content {\r\n  max-width: 70%;\r\n}\r\n\r\n.message-bubble {\r\n  background: #f0f0f0;\r\n  padding: 0.75rem;\r\n  border-radius: 12px;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.message.is-sent .message-bubble {\r\n  background: #1890ff;\r\n  color: white;\r\n}\r\n\r\n.message-time {\r\n  font-size: 0.8rem;\r\n  color: #999;\r\n  text-align: right;\r\n}\r\n\r\n.message-input {\r\n  padding: 1rem;\r\n  border-top: 1px solid #f0f0f0;\r\n}\r\n\r\n.input-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.input-wrapper textarea {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 6px;\r\n  resize: vertical;\r\n  font-family: inherit;\r\n}\r\n\r\n.input-wrapper textarea:focus {\r\n  outline: none;\r\n  border-color: #1890ff;\r\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n}\r\n\r\n.input-actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.input-hint {\r\n  color: #999;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.send-btn {\r\n  background: #1890ff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 1.5rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.send-btn:hover:not(:disabled) {\r\n  background: #40a9ff;\r\n}\r\n\r\n.send-btn:disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.bookmark-detail {\r\n  padding: 2rem;\r\n}\r\n\r\n.bookmark-header h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #333;\r\n}\r\n\r\n.bookmark-info {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-bottom: 1.5rem;\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n.bookmark-content-full {\r\n  color: #333;\r\n  line-height: 1.6;\r\n  margin-bottom: 1.5rem;\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.bookmark-note {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.bookmark-note label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.bookmark-note textarea {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 6px;\r\n  resize: vertical;\r\n  font-family: inherit;\r\n}\r\n\r\n.view-btn {\r\n  background: #1890ff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-left: 0.5rem;\r\n}\r\n\r\n.view-btn:hover {\r\n  background: #40a9ff;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n  width: 90%;\r\n  max-width: 400px;\r\n}\r\n\r\n.modal-content h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #333;\r\n}\r\n\r\n.modal-content input {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 4px;\r\n  margin-bottom: 1rem;\r\n  font-size: 1rem;\r\n}\r\n\r\n.modal-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.btn-primary,\r\n.btn-secondary {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn-primary {\r\n  background: #1890ff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #40a9ff;\r\n}\r\n\r\n.btn-primary:disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #f5f5f5;\r\n  color: #666;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #e8e8e8;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  color: #999;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .message-layout {\r\n    grid-template-columns: 1fr;\r\n    height: auto;\r\n  }\r\n  \r\n  .sidebar {\r\n    height: 300px;\r\n  }\r\n  \r\n  .content {\r\n    height: 500px;\r\n  }\r\n}\r\n</style>"],"names":["router","useRouter","authStore","useAuthStore","messageStore","useMessageStore","bookmarkStore","useBookmarkStore","activeTab","ref","selectedConversationId","selectedBookmark","newMessage","userSearchQuery","searchResults","selectedFolder","bookmarkNote","showCreateFolderDialog","newFolderName","messagesContainer","conversations","computed","convs","currentMessages","unreadCount","bookmarks","folders","currentUserId","_a","selectedConversation","c","onMounted","loadInitialData","err","loadBookmarks","error","selectConversation","conversationId","result","conversation","nextTick","sendMessage","searchUsers","startNewConversation","user","existingConversation","deleteCurrentConversation","openBookmark","bookmark","removeBookmark","bookmarkId","updateBookmarkNote","createFolder","goToPost","postId","getBookmarkExcerpt","content","formatTime","timestamp","date","diff","watch","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_RouterLink","_cache","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_normalizeClass","_hoisted_12","_hoisted_13","_hoisted_14","$event","_hoisted_15","_Fragment","_renderList","UserAvatar","_hoisted_17","_b","_hoisted_19","_hoisted_20","_hoisted_21","_c","_hoisted_22","_hoisted_23","_d","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","folder","_hoisted_28","_hoisted_29","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_withModifiers","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_42","_hoisted_43","_hoisted_44","_f","_e","message","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_51","_hoisted_52","_hoisted_41","_hoisted_53","_hoisted_55","_hoisted_56","_hoisted_57","_g","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_h","_hoisted_63","_hoisted_64","_hoisted_54","_hoisted_65","_hoisted_66","_hoisted_67"],"mappings":"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"}