{"version":3,"file":"PostCard-Dk0tpnu1.js","sources":["../../src/components/SendMessageModal.vue","../../src/components/BookmarkModal.vue","../../src/components/PostCard.vue"],"sourcesContent":["<template>\r\n  <div class=\"message-modal-overlay\" @click=\"$emit('close')\">\r\n    <div class=\"message-modal\" @click.stop>\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">\r\n          <UserAvatar :user=\"recipient\" size=\"sm\" />\r\n          发送私信给 {{ recipient.username }}\r\n        </h5>\r\n        <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\r\n      </div>\r\n\r\n      <div class=\"modal-body\">\r\n        <form @submit.prevent=\"handleSendMessage\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"message-content\" class=\"form-label\">消息内容</label>\r\n            <textarea\r\n              id=\"message-content\"\r\n              v-model=\"messageContent\"\r\n              class=\"form-control\"\r\n              rows=\"4\"\r\n              placeholder=\"输入你想说的话...\"\r\n              maxlength=\"1000\"\r\n              required\r\n            ></textarea>\r\n            <div class=\"form-text\">\r\n              {{ messageContent.length }}/1000 字符\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"message-tips\">\r\n            <h6>温馨提示：</h6>\r\n            <ul>\r\n              <li>请友善交流，尊重他人</li>\r\n              <li>禁止发送垃圾信息或不当内容</li>\r\n              <li>消息发送后无法撤回</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"$emit('close')\">\r\n              取消\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              class=\"btn btn-primary\" \r\n              :disabled=\"!messageContent.trim() || isSending\"\r\n            >\r\n              <span v-if=\"isSending\">\r\n                <span class=\"spinner-border spinner-border-sm me-2\"></span>\r\n                发送中...\r\n              </span>\r\n              <span v-else>\r\n                <i class=\"bi bi-send me-2\"></i>\r\n                发送消息\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { useMessageStore } from '@/stores/messages'\r\nimport UserAvatar from './UserAvatar.vue'\r\n\r\ninterface Props {\r\n  recipient: {\r\n    id: string\r\n    username: string\r\n    avatar_url: string | null\r\n    level: number\r\n  }\r\n}\r\n\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits<{\r\n  close: []\r\n  sent: []\r\n}>()\r\n\r\nconst messageStore = useMessageStore()\r\nconst { sendMessage } = messageStore\r\n\r\nconst messageContent = ref('')\r\nconst isSending = ref(false)\r\n\r\nconst handleSendMessage = async () => {\r\n  if (!messageContent.value.trim()) return\r\n\r\n  isSending.value = true\r\n  try {\r\n    const result = await sendMessage(props.recipient.id, messageContent.value.trim())\r\n    \r\n    if (result.success) {\r\n      messageContent.value = ''\r\n      emit('sent')\r\n      emit('close')\r\n    } else {\r\n      alert('发送失败：' + (result.error || '未知错误'))\r\n    }\r\n  } catch (error) {\r\n    console.error('发送消息失败:', error)\r\n    alert('发送失败，请稍后重试')\r\n  } finally {\r\n    isSending.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.message-modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1050;\r\n  padding: 20px;\r\n}\r\n\r\n.message-modal {\r\n  background: white;\r\n  border-radius: 8px;\r\n  width: 100%;\r\n  max-width: 500px;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.modal-title {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  color: #212529;\r\n}\r\n\r\n.btn-close {\r\n  background: none;\r\n  border: none;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  color: #6c757d;\r\n  padding: 0;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.btn-close:hover {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.modal-body {\r\n  padding: 20px;\r\n}\r\n\r\n.form-label {\r\n  font-weight: 500;\r\n  color: #495057;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.form-control {\r\n  border: 1px solid #ced4da;\r\n  border-radius: 6px;\r\n  padding: 12px;\r\n  font-size: 16px;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n}\r\n\r\n.form-control:focus {\r\n  border-color: #86b7fe;\r\n  outline: 0;\r\n  box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);\r\n}\r\n\r\n.form-text {\r\n  font-size: 14px;\r\n  color: #6c757d;\r\n  margin-top: 4px;\r\n}\r\n\r\n.message-tips {\r\n  background-color: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.message-tips h6 {\r\n  margin: 0 0 8px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #495057;\r\n}\r\n\r\n.message-tips ul {\r\n  margin: 0;\r\n  padding-left: 20px;\r\n}\r\n\r\n.message-tips li {\r\n  font-size: 14px;\r\n  color: #6c757d;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  transition: all 0.2s;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n  border-color: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #5c636a;\r\n  border-color: #565e64;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #0d6efd;\r\n  border-color: #0d6efd;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background-color: #0b5ed7;\r\n  border-color: #0a58ca;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.65;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.spinner-border-sm {\r\n  width: 1rem;\r\n  height: 1rem;\r\n}\r\n\r\n.spinner-border {\r\n  display: inline-block;\r\n  width: 2rem;\r\n  height: 2rem;\r\n  vertical-align: -0.125em;\r\n  border: 0.25em solid currentColor;\r\n  border-right-color: transparent;\r\n  border-radius: 50%;\r\n  animation: spinner-border 0.75s linear infinite;\r\n}\r\n\r\n@keyframes spinner-border {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  .message-modal-overlay {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .message-modal {\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .modal-header,\r\n  .modal-body {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .modal-footer {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .btn {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"bookmark-modal-overlay\" @click=\"$emit('close')\">\r\n    <div class=\"bookmark-modal\" @click.stop>\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">\r\n          <i class=\"bi bi-bookmark-star\"></i>\r\n          收藏帖子\r\n        </h5>\r\n        <button type=\"button\" class=\"btn-close\" @click=\"$emit('close')\"></button>\r\n      </div>\r\n\r\n      <div class=\"modal-body\">\r\n        <form @submit.prevent=\"handleBookmark\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"folder-name\" class=\"form-label\">收藏夹</label>\r\n            <div class=\"folder-input-group\">\r\n              <select\r\n                id=\"folder-name\"\r\n                v-model=\"selectedFolder\"\r\n                class=\"form-select\"\r\n                required\r\n              >\r\n                <option value=\"\">选择收藏夹...</option>\r\n                <option \r\n                  v-for=\"folder in existingFolders\" \r\n                  :key=\"folder\" \r\n                  :value=\"folder\"\r\n                >\r\n                  {{ folder }}\r\n                </option>\r\n                <option value=\"__new__\">+ 创建新收藏夹</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"selectedFolder === '__new__'\" class=\"mb-3\">\r\n            <label for=\"new-folder-name\" class=\"form-label\">新收藏夹名称</label>\r\n            <input\r\n              id=\"new-folder-name\"\r\n              v-model=\"newFolderName\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"输入收藏夹名称...\"\r\n              maxlength=\"20\"\r\n              required\r\n            />\r\n            <div class=\"form-text\">\r\n              {{ newFolderName.length }}/20 字符\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"mb-3\">\r\n            <label for=\"bookmark-note\" class=\"form-label\">备注（可选）</label>\r\n            <textarea\r\n              id=\"bookmark-note\"\r\n              v-model=\"bookmarkNote\"\r\n              class=\"form-control\"\r\n              rows=\"3\"\r\n              placeholder=\"添加备注...\"\r\n              maxlength=\"200\"\r\n            ></textarea>\r\n            <div class=\"form-text\">\r\n              {{ bookmarkNote.length }}/200 字符\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"post-preview\">\r\n            <h6>帖子预览</h6>\r\n            <div class=\"preview-content\">\r\n              <h6>{{ post.title }}</h6>\r\n              <p>{{ truncateText(post.content, 100) }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"$emit('close')\">\r\n              取消\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              class=\"btn btn-primary\" \r\n              :disabled=\"!canSubmit || isBookmarking\"\r\n            >\r\n              <span v-if=\"isBookmarking\">\r\n                <span class=\"spinner-border spinner-border-sm me-2\"></span>\r\n                收藏中...\r\n              </span>\r\n              <span v-else>\r\n                <i class=\"bi bi-bookmark-plus me-2\"></i>\r\n                确认收藏\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useBookmarkStore } from '@/stores/bookmarks'\r\n\r\ninterface Props {\r\n  post: {\r\n    id: string\r\n    title: string\r\n    content: string\r\n  }\r\n}\r\n\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits<{\r\n  close: []\r\n  bookmarked: []\r\n}>()\r\n\r\nconst bookmarksStore = useBookmarkStore()\r\nconst { addBookmark, fetchFolders, createFolder } = bookmarksStore\r\n\r\nconst selectedFolder = ref('')\r\nconst newFolderName = ref('')\r\nconst bookmarkNote = ref('')\r\nconst isBookmarking = ref(false)\r\nconst existingFolders = ref<string[]>([])\r\n\r\nconst canSubmit = computed(() => {\r\n  if (selectedFolder.value === '__new__') {\r\n    return newFolderName.value.trim() !== ''\r\n  }\r\n  return selectedFolder.value !== ''\r\n})\r\n\r\nconst truncateText = (text: string, maxLength: number) => {\r\n  if (text.length <= maxLength) return text\r\n  return text.substring(0, maxLength) + '...'\r\n}\r\n\r\nconst handleBookmark = async () => {\r\n  if (!canSubmit.value) return\r\n\r\n  isBookmarking.value = true\r\n  try {\r\n    let folderName = selectedFolder.value\r\n    \r\n    // 如果是创建新收藏夹\r\n    if (selectedFolder.value === '__new__') {\r\n      folderName = newFolderName.value.trim()\r\n      console.log('创建新收藏夹:', folderName)\r\n      \r\n      const createResult = await createFolder(folderName)\r\n      if (!createResult.success) {\r\n        console.error('创建收藏夹失败:', createResult.error)\r\n        alert('创建收藏夹失败：' + (createResult.error || '未知错误'))\r\n        return\r\n      }\r\n      console.log('创建收藏夹成功')\r\n    }\r\n\r\n    console.log('开始收藏，文件夹:', folderName, '帖子ID:', props.post.id)\r\n\r\n    const result = await addBookmark(\r\n      'post',\r\n      props.post.id,\r\n      folderName,\r\n      bookmarkNote.value.trim()\r\n    )\r\n    \r\n    console.log('收藏结果:', result)\r\n    \r\n    if (result.success) {\r\n      emit('bookmarked')\r\n      emit('close')\r\n    } else {\r\n      console.error('收藏失败:', result.error)\r\n      alert('收藏失败：' + (result.error || '未知错误'))\r\n    }\r\n  } catch (error) {\r\n    console.error('收藏异常:', error)\r\n    alert('收藏失败，请稍后重试')\r\n  } finally {\r\n    isBookmarking.value = false\r\n  }\r\n}\r\n\r\nconst loadExistingFolders = async () => {\r\n  try {\r\n    await fetchFolders()\r\n    existingFolders.value = bookmarksStore.folders\r\n  } catch (error) {\r\n    console.error('加载收藏夹失败:', error)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  loadExistingFolders()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.bookmark-modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1050;\r\n  padding: 20px;\r\n}\r\n\r\n.bookmark-modal {\r\n  background: white;\r\n  border-radius: 8px;\r\n  width: 100%;\r\n  max-width: 500px;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.modal-title {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  color: #212529;\r\n}\r\n\r\n.btn-close {\r\n  background: none;\r\n  border: none;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  color: #6c757d;\r\n  padding: 0;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 4px;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.btn-close:hover {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.modal-body {\r\n  padding: 20px;\r\n}\r\n\r\n.form-label {\r\n  font-weight: 500;\r\n  color: #495057;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.form-control,\r\n.form-select {\r\n  border: 1px solid #ced4da;\r\n  border-radius: 6px;\r\n  padding: 12px;\r\n  font-size: 16px;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n}\r\n\r\n.form-control:focus,\r\n.form-select:focus {\r\n  border-color: #86b7fe;\r\n  outline: 0;\r\n  box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);\r\n}\r\n\r\n.form-text {\r\n  font-size: 14px;\r\n  color: #6c757d;\r\n  margin-top: 4px;\r\n}\r\n\r\n.post-preview {\r\n  background-color: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 16px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.post-preview h6 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #495057;\r\n}\r\n\r\n.preview-content h6 {\r\n  display: block;\r\n  font-weight: 600;\r\n  color: #212529;\r\n  margin-bottom: 8px;\r\n  font-size: 16px;\r\n}\r\n\r\n.preview-content p {\r\n  margin: 0;\r\n  color: #6c757d;\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  border: 1px solid transparent;\r\n  transition: all 0.2s;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n  border-color: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #5c636a;\r\n  border-color: #565e64;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: #0d6efd;\r\n  border-color: #0d6efd;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background-color: #0b5ed7;\r\n  border-color: #0a58ca;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.65;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.spinner-border-sm {\r\n  width: 1rem;\r\n  height: 1rem;\r\n}\r\n\r\n.spinner-border {\r\n  display: inline-block;\r\n  width: 2rem;\r\n  height: 2rem;\r\n  vertical-align: -0.125em;\r\n  border: 0.25em solid currentColor;\r\n  border-right-color: transparent;\r\n  border-radius: 50%;\r\n  animation: spinner-border 0.75s linear infinite;\r\n}\r\n\r\n@keyframes spinner-border {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  .bookmark-modal-overlay {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .bookmark-modal {\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .modal-header,\r\n  .modal-body {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .modal-footer {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .btn {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>","<template>\r\n  <article class=\"post-card\" :class=\"{ 'post-pinned': post.is_pinned }\">\r\n    <div class=\"post-header\">\r\n      <div class=\"user-info\">\r\n        <UserAvatar \r\n          :username=\"post.profiles.username\" \r\n          :avatar-id=\"post.profiles.avatar_url\"\r\n          size=\"40px\"\r\n        />\r\n        <div class=\"user-details\">\r\n          <span class=\"username\" :class=\"getLevelClass(post.profiles.level)\">\r\n            {{ post.profiles.username }}\r\n            <span class=\"level-badge\">Lv.{{ post.profiles.level }}</span>\r\n          </span>\r\n          <span class=\"post-time\">{{ formatTime(post.created_at) }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"post-actions\">\r\n        <div v-if=\"post.is_pinned\" class=\"pinned-indicator\">\r\n          <span>📌 置顶</span>\r\n        </div>\r\n        <div class=\"action-buttons\">\r\n          <button \r\n            v-if=\"isAuthenticated && !isAuthor\"\r\n            class=\"action-btn message-btn\"\r\n            @click=\"showMessageModal\"\r\n            title=\"发送私信\"\r\n          >\r\n            <i class=\"bi bi-envelope\"></i>\r\n            <span>私信</span>\r\n          </button>\r\n          <button \r\n            v-if=\"isAuthenticated\"\r\n            class=\"action-btn bookmark-btn\"\r\n            :class=\"{ active: isBookmarked }\"\r\n            @click=\"handleBookmark\"\r\n            title=\"收藏帖子\"\r\n          >\r\n            <i class=\"bi\" :class=\"isBookmarked ? 'bi-bookmark-fill' : 'bi-bookmark'\"></i>\r\n            <span>{{ isBookmarked ? '已收藏' : '收藏' }}</span>\r\n          </button>\r\n          <button \r\n            v-if=\"isAuthor\" \r\n            class=\"action-btn delete-btn\" \r\n            @click=\"handleDeletePost\"\r\n            title=\"删除帖子\"\r\n          >\r\n            <i class=\"bi bi-trash\"></i>\r\n            <span>删除</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"post-content\">\r\n      <h3 class=\"post-title\">\r\n        <RouterLink :to=\"`/post/${post.id}`\" class=\"title-link\">\r\n          {{ post.title }}\r\n        </RouterLink>\r\n      </h3>\r\n      <p class=\"post-excerpt\">{{ getExcerpt(post.content) }}</p>\r\n      \r\n      <div v-if=\"post.tags && post.tags.length > 0\" class=\"post-tags\">\r\n        <span \r\n          v-for=\"tag in post.tags.slice(0, 3)\" \r\n          :key=\"tag\" \r\n          class=\"tag\"\r\n        >\r\n          #{{ tag }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"post-footer\">\r\n      <div class=\"interaction-stats\">\r\n        <button \r\n          class=\"interaction-btn\" \r\n          :class=\"{ active: post.user_has_liked }\"\r\n          @click=\"$emit('like', post.id)\"\r\n        >\r\n          <i class=\"bi\" :class=\"post.user_has_liked ? 'bi-heart-fill' : 'bi-heart'\"></i>\r\n          <span>点赞 {{ post.like_count }}</span>\r\n        </button>\r\n        <button class=\"interaction-btn\" @click=\"$emit('comment', post.id)\">\r\n          <i class=\"bi bi-chat\"></i>\r\n          <span>评论 {{ post.comment_count }}</span>\r\n        </button>\r\n        <span class=\"view-count\">\r\n          <i class=\"bi bi-eye\"></i>\r\n          <span>浏览 {{ post.view_count }}</span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 私信模态框 -->\r\n    <SendMessageModal\r\n      v-if=\"showMessageModalVisible\"\r\n      :recipient=\"{\r\n        id: post.user_id,\r\n        username: post.profiles.username,\r\n        avatar_url: post.profiles.avatar_url,\r\n        level: post.profiles.level\r\n      }\"\r\n      @close=\"showMessageModalVisible = false\"\r\n      @sent=\"handleMessageSent\"\r\n    />\r\n\r\n    <!-- 收藏模态框 -->\r\n    <BookmarkModal\r\n      v-if=\"showBookmarkModalVisible\"\r\n      :post=\"{\r\n        id: post.id,\r\n        title: post.title,\r\n        content: post.content\r\n      }\"\r\n      @close=\"showBookmarkModalVisible = false\"\r\n      @bookmarked=\"handleBookmarked\"\r\n    />\r\n  </article>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport { usePostStore } from '@/stores/posts'\r\nimport { useBookmarkStore } from '@/stores/bookmarks'\r\nimport UserAvatar from '@/components/UserAvatar.vue'\r\nimport SendMessageModal from './SendMessageModal.vue'\r\nimport BookmarkModal from './BookmarkModal.vue'\r\nimport type { Database } from '@/types/supabase'\r\n\r\ninterface Props {\r\n  post: Database['public']['Tables']['posts']['Row'] & {\r\n    profiles: {\r\n      username: string\r\n      avatar_url: string | null\r\n      level: number\r\n    }\r\n    user_has_liked?: boolean\r\n  }\r\n}\r\n\r\nconst props = defineProps<Props>()\r\n\r\nconst authStore = useAuthStore()\r\nconst postStore = usePostStore()\r\nconst bookmarkStore = useBookmarkStore()\r\n\r\ndefineEmits<{\r\n  like: [postId: string]\r\n  comment: [postId: string]\r\n}>()\r\n\r\n// 响应式数据\r\nconst showMessageModalVisible = ref(false)\r\nconst showBookmarkModalVisible = ref(false)\r\nconst isBookmarked = ref(false)\r\n\r\n// 计算属性\r\nconst isAuthenticated = computed(() => authStore.isAuthenticated)\r\nconst isAuthor = computed(() => {\r\n  return authStore.user?.id === props.post.user_id\r\n})\r\n\r\n// 组件挂载时检查收藏状态\r\nonMounted(async () => {\r\n  if (isAuthenticated.value) {\r\n    isBookmarked.value = await bookmarkStore.checkIsBookmarked('post', props.post.id)\r\n  }\r\n})\r\n\r\n// 监听认证状态变化，重新检查收藏状态\r\nwatch(isAuthenticated, async (newValue) => {\r\n  if (newValue) {\r\n    isBookmarked.value = await bookmarkStore.checkIsBookmarked('post', props.post.id)\r\n  } else {\r\n    isBookmarked.value = false\r\n  }\r\n})\r\n\r\n// 显示私信模态框\r\nconst showMessageModal = () => {\r\n  showMessageModalVisible.value = true\r\n}\r\n\r\n// 处理私信发送成功\r\nconst handleMessageSent = () => {\r\n  console.log('私信发送成功')\r\n}\r\n\r\n// 处理收藏\r\nconst handleBookmark = () => {\r\n  showBookmarkModalVisible.value = true\r\n}\r\n\r\n// 处理收藏成功\r\nconst handleBookmarked = async () => {\r\n  // 重新检查收藏状态以确保UI与数据库同步\r\n  isBookmarked.value = await bookmarkStore.checkIsBookmarked('post', props.post.id)\r\n  console.log('帖子收藏成功，状态已更新')\r\n}\r\n\r\n// 删除帖子\r\nconst handleDeletePost = async () => {\r\n  if (!confirm('确定要删除这个帖子吗？此操作不可恢复。')) {\r\n    return\r\n  }\r\n  \r\n  const result = await postStore.deletePost(props.post.id)\r\n  if (result.success) {\r\n    console.log('帖子删除成功')\r\n  } else {\r\n    console.error('删除帖子失败:', result.error)\r\n    alert('删除失败: ' + result.error)\r\n  }\r\n}\r\n\r\n// 根据用户等级获取样式类\r\nconst getLevelClass = (level: number) => {\r\n  if (level >= 10) return 'level-10-plus'\r\n  if (level >= 7) return 'level-7-9'\r\n  if (level >= 4) return 'level-4-6'\r\n  return 'level-1-3'\r\n}\r\n\r\n// 格式化时间显示\r\nconst formatTime = (timestamp: string) => {\r\n  const date = new Date(timestamp)\r\n  const now = new Date()\r\n  const diff = now.getTime() - date.getTime()\r\n  \r\n  if (diff < 60000) return '刚刚'\r\n  if (diff < 3600000) return `${Math.floor(diff / 60000)}分钟前`\r\n  if (diff < 86400000) return `${Math.floor(diff / 3600000)}小时前`\r\n  if (diff < 604800000) return `${Math.floor(diff / 86400000)}天前`\r\n  \r\n  return date.toLocaleDateString('zh-CN')\r\n}\r\n\r\n// 获取内容摘要\r\nconst getExcerpt = (content: string) => {\r\n  const plainText = content.replace(/[#*_~`]/g, '').replace(/\\n/g, ' ')\r\n  return plainText.length > 100 ? plainText.substring(0, 100) + '...' : plainText\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.post-card {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 1rem;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n  transition: box-shadow 0.2s;\r\n}\r\n\r\n.post-card:hover {\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.15);\r\n}\r\n\r\n.post-pinned {\r\n  border-left: 4px solid #ff6b35;\r\n}\r\n\r\n.post-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.post-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.action-btn {\r\n  background: none;\r\n  border: 1px solid #d9d9d9;\r\n  cursor: pointer;\r\n  padding: 0.5rem 0.75rem;\r\n  border-radius: 6px;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.25rem;\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n  min-width: 80px;\r\n}\r\n\r\n.action-btn:hover {\r\n  border-color: #1890ff;\r\n  color: #1890ff;\r\n}\r\n\r\n.message-btn:hover {\r\n  border-color: #722ed1;\r\n  color: #722ed1;\r\n}\r\n\r\n.bookmark-btn.active {\r\n  background: #faad14;\r\n  border-color: #faad14;\r\n  color: white;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background: #fff1f0;\r\n  border-color: #ff4d4f;\r\n  color: #ff4d4f;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.user-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.username {\r\n  font-weight: 600;\r\n  font-size: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.level-badge {\r\n  background: #e8f4fd;\r\n  color: #1890ff;\r\n  padding: 0.125rem 0.5rem;\r\n  border-radius: 12px;\r\n  font-size: 0.75rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.level-4-6 {\r\n  color: #52c41a;\r\n}\r\n\r\n.level-7-9 {\r\n  color: #fa8c16;\r\n}\r\n\r\n.level-10-plus {\r\n  color: #f5222d;\r\n  font-weight: 700;\r\n}\r\n\r\n.post-time {\r\n  font-size: 0.875rem;\r\n  color: #666;\r\n}\r\n\r\n.pinned-indicator {\r\n  background: #fff7e6;\r\n  color: #fa8c16;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.post-content {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.post-title {\r\n  margin: 0 0 0.5rem 0;\r\n  font-size: 1.25rem;\r\n  line-height: 1.4;\r\n}\r\n\r\n.title-link {\r\n  color: #1890ff;\r\n  text-decoration: none;\r\n}\r\n\r\n.title-link:hover {\r\n  color: #40a9ff;\r\n  text-decoration: underline;\r\n}\r\n\r\n.post-excerpt {\r\n  color: #666;\r\n  line-height: 1.6;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.post-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.tag {\r\n  background: #f0f2f5;\r\n  color: #666;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.post-footer {\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 1rem;\r\n}\r\n\r\n.interaction-stats {\r\n  display: flex;\r\n  gap: 1rem;\r\n  align-items: center;\r\n}\r\n\r\n.interaction-btn {\r\n  background: none;\r\n  border: 1px solid #d9d9d9;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  color: #666;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.interaction-btn:hover {\r\n  border-color: #1890ff;\r\n  color: #1890ff;\r\n}\r\n\r\n.interaction-btn.active {\r\n  background: #1890ff;\r\n  color: white;\r\n  border-color: #1890ff;\r\n}\r\n\r\n.view-count {\r\n  color: #999;\r\n  font-size: 0.875rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n</style>"],"names":["props","__props","emit","__emit","messageStore","useMessageStore","sendMessage","messageContent","ref","isSending","handleSendMessage","result","error","_createElementBlock","$emit","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","UserAvatar","_toDisplayString","_hoisted_3","_hoisted_4","$event","_hoisted_5","_hoisted_6","_hoisted_8","_cache","_hoisted_9","bookmarksStore","useBookmarkStore","addBookmark","fetchFolders","createFolder","selectedFolder","newFolderName","bookmarkNote","isBookmarking","existingFolders","canSubmit","computed","truncateText","text","maxLength","handleBookmark","folderName","createResult","loadExistingFolders","onMounted","_Fragment","_renderList","folder","_openBlock","_hoisted_7","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","authStore","useAuthStore","postStore","usePostStore","bookmarkStore","showMessageModalVisible","showBookmarkModalVisible","isBookmarked","isAuthenticated","isAuthor","_a","watch","newValue","showMessageModal","handleMessageSent","handleBookmarked","handleDeletePost","getLevelClass","level","formatTime","timestamp","date","diff","getExcerpt","content","plainText","_normalizeClass","_createTextVNode","_component_RouterLink","tag","_hoisted_13","_createBlock","SendMessageModal","BookmarkModal"],"mappings":"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"}